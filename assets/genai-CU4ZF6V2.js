var V;(function(i){i.assertEqual=o=>{};function e(o){}i.assertIs=e;function t(o){throw new Error}i.assertNever=t,i.arrayToEnum=o=>{const l={};for(const a of o)l[a]=a;return l},i.getValidEnumValues=o=>{const l=i.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),a={};for(const u of l)a[u]=o[u];return i.objectValues(a)},i.objectValues=o=>i.objectKeys(o).map(function(l){return o[l]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&l.push(a);return l},i.find=(o,l)=>{for(const a of o)if(l(a))return a},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,l=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(l)}i.joinValues=n,i.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(V||(V={}));var gt;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(gt||(gt={}));const C=V.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),j=i=>{switch(typeof i){case"undefined":return C.undefined;case"string":return C.string;case"number":return Number.isNaN(i)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(i)?C.array:i===null?C.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?C.promise:typeof Map<"u"&&i instanceof Map?C.map:typeof Set<"u"&&i instanceof Set?C.set:typeof Date<"u"&&i instanceof Date?C.date:C.object;default:return C.unknown}},y=V.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Q extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},n={_errors:[]},o=l=>{for(const a of l.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let u=n,d=0;for(;d<a.path.length;){const c=a.path[d];d===a.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(t(a))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return o(this),n}static assert(e){if(!(e instanceof Q))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,V.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Q.create=i=>new Q(i);const Ze=(i,e)=>{let t;switch(i.code){case y.invalid_type:i.received===C.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case y.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,V.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:t=`Unrecognized key(s) in object: ${V.joinValues(i.keys,", ")}`;break;case y.invalid_union:t="Invalid input";break;case y.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${V.joinValues(i.options)}`;break;case y.invalid_enum_value:t=`Invalid enum value. Expected ${V.joinValues(i.options)}, received '${i.received}'`;break;case y.invalid_arguments:t="Invalid function arguments";break;case y.invalid_return_type:t="Invalid function return type";break;case y.invalid_date:t="Invalid date";break;case y.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:V.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case y.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case y.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case y.custom:t="Invalid input";break;case y.invalid_intersection_types:t="Intersection results could not be merged";break;case y.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case y.not_finite:t="Number must be finite";break;default:t=e.defaultError,V.assertNever(i)}return{message:t}};let yi=Ze;function vi(){return yi}const Ti=i=>{const{data:e,path:t,errorMaps:n,issueData:o}=i,l=[...t,...o.path||[]],a={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let u="";const d=n.filter(c=>!!c).slice().reverse();for(const c of d)u=c(a,{data:e,defaultError:u}).message;return{...o,path:l,message:u}};function T(i,e){const t=vi(),n=Ti({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===Ze?void 0:Ze].filter(o=>!!o)});i.common.issues.push(n)}class b{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return x;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const l=await o.key,a=await o.value;n.push({key:l,value:a})}return b.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:l,value:a}=o;if(l.status==="aborted"||a.status==="aborted")return x;l.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[l.value]=a.value)}return{status:e.value,value:n}}}const x=Object.freeze({status:"aborted"}),Te=i=>({status:"dirty",value:i}),H=i=>({status:"valid",value:i}),yt=i=>i.status==="aborted",vt=i=>i.status==="dirty",de=i=>i.status==="valid",Ne=i=>typeof Promise<"u"&&i instanceof Promise;var _;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));class z{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Tt=(i,e)=>{if(de(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Q(i.common.issues);return this._error=t,this._error}}};function P(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(a,u)=>{const{message:d}=i;return a.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:o}}class w{get description(){return this._def.description}_getType(e){return j(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:j(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:j(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ne(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:j(e)},o=this._parseSync({data:e,path:n.path,parent:n});return Tt(n,o)}"~validate"(e){var n,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:j(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:t});return de(l)?{value:l.value}:{issues:t.common.issues}}catch(l){(o=(n=l==null?void 0:l.message)==null?void 0:n.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(l=>de(l)?{value:l.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:j(e)},o=this._parse({data:e,path:n.path,parent:n}),l=await(Ne(o)?o:Promise.resolve(o));return Tt(n,l)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,l)=>{const a=e(o),u=()=>l.addIssue({code:y.custom,...n(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(d=>d?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new me({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ee.create(this,this._def)}nullable(){return he.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return K.create(this)}promise(){return Fe.create(this,this._def)}or(e){return ke.create([this,e],this._def)}and(e){return Ve.create(this,e,this._def)}transform(e){return new me({...P(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Xe({...P(this._def),innerType:this,defaultValue:t,typeName:A.ZodDefault})}brand(){return new bi({typeName:A.ZodBranded,type:this,...P(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Qe({...P(this._def),innerType:this,catchValue:t,typeName:A.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ct.create(this,e)}readonly(){return je.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ci=/^c[^\s-]{8,}$/i,_i=/^[0-9a-z]+$/,Ei=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Si=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ai=/^[a-z0-9_-]{21}$/i,Ii=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Mi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ri="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Je;const Pi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ni=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Di=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ki=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Vi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Hn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Li=new RegExp(`^${Hn}$`);function Jn(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Fi(i){return new RegExp(`^${Jn(i)}$`)}function Ui(i){let e=`${Hn}T${Jn(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Gi(i,e){return!!((e==="v4"||!e)&&Pi.test(i)||(e==="v6"||!e)&&Ni.test(i))}function qi(i,e){if(!Ii.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function Bi(i,e){return!!((e==="v4"||!e)&&wi.test(i)||(e==="v6"||!e)&&Di.test(i))}class Y extends w{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){const l=this._getOrReturnCtx(e);return T(l,{code:y.invalid_type,expected:C.string,received:l.parsedType}),x}const n=new b;let o;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(o=this._getOrReturnCtx(e,o),T(o,{code:y.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="max")e.data.length>l.value&&(o=this._getOrReturnCtx(e,o),T(o,{code:y.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="length"){const a=e.data.length>l.value,u=e.data.length<l.value;(a||u)&&(o=this._getOrReturnCtx(e,o),a?T(o,{code:y.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):u&&T(o,{code:y.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),n.dirty())}else if(l.kind==="email")Mi.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"email",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="emoji")Je||(Je=new RegExp(Ri,"u")),Je.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"emoji",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="uuid")Si.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"uuid",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="nanoid")Ai.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"nanoid",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid")Ci.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"cuid",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid2")_i.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"cuid2",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="ulid")Ei.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"ulid",code:y.invalid_string,message:l.message}),n.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),T(o,{validation:"url",code:y.invalid_string,message:l.message}),n.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"regex",code:y.invalid_string,message:l.message}),n.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),n.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:{startsWith:l.value},message:l.message}),n.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:{endsWith:l.value},message:l.message}),n.dirty()):l.kind==="datetime"?Ui(l).test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:"datetime",message:l.message}),n.dirty()):l.kind==="date"?Li.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:"date",message:l.message}),n.dirty()):l.kind==="time"?Fi(l).test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{code:y.invalid_string,validation:"time",message:l.message}),n.dirty()):l.kind==="duration"?xi.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"duration",code:y.invalid_string,message:l.message}),n.dirty()):l.kind==="ip"?Gi(e.data,l.version)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"ip",code:y.invalid_string,message:l.message}),n.dirty()):l.kind==="jwt"?qi(e.data,l.alg)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"jwt",code:y.invalid_string,message:l.message}),n.dirty()):l.kind==="cidr"?Bi(e.data,l.version)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"cidr",code:y.invalid_string,message:l.message}),n.dirty()):l.kind==="base64"?ki.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"base64",code:y.invalid_string,message:l.message}),n.dirty()):l.kind==="base64url"?Vi.test(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{validation:"base64url",code:y.invalid_string,message:l.message}),n.dirty()):V.assertNever(l);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:y.invalid_string,..._.errToObj(n)})}_addCheck(e){return new Y({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,..._.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,..._.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,..._.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,..._.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,..._.errToObj(t)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new Y({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Y({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Y({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Y.create=i=>new Y({checks:[],typeName:A.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...P(i)});function $i(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,l=Number.parseInt(i.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return l%a/10**o}class re extends w{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){const l=this._getOrReturnCtx(e);return T(l,{code:y.invalid_type,expected:C.number,received:l.parsedType}),x}let n;const o=new b;for(const l of this._def.checks)l.kind==="int"?V.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:y.invalid_type,expected:"integer",received:"float",message:l.message}),o.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="multipleOf"?$i(e.data,l.value)!==0&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:y.not_finite,message:l.message}),o.dirty()):V.assertNever(l);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,n,o){return new re({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_.toString(o)}]})}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&V.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}re.create=i=>new re({checks:[],typeName:A.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...P(i)});class se extends w{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let n;const o=new b;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),T(n,{code:y.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):V.assertNever(l);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return T(t,{code:y.invalid_type,expected:C.bigint,received:t.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,_.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_.toString(t))}setLimit(e,t,n,o){return new se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_.toString(o)}]})}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}se.create=i=>new se({checks:[],typeName:A.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...P(i)});class De extends w{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.boolean,received:n.parsedType}),x}return H(e.data)}}De.create=i=>new De({typeName:A.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...P(i)});class fe extends w{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){const l=this._getOrReturnCtx(e);return T(l,{code:y.invalid_type,expected:C.date,received:l.parsedType}),x}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return T(l,{code:y.invalid_date}),x}const n=new b;let o;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(o=this._getOrReturnCtx(e,o),T(o,{code:y.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),n.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(o=this._getOrReturnCtx(e,o),T(o,{code:y.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),n.dirty()):V.assertNever(l);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}fe.create=i=>new fe({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:A.ZodDate,...P(i)});class Ct extends w{_parse(e){if(this._getType(e)!==C.symbol){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.symbol,received:n.parsedType}),x}return H(e.data)}}Ct.create=i=>new Ct({typeName:A.ZodSymbol,...P(i)});class _t extends w{_parse(e){if(this._getType(e)!==C.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.undefined,received:n.parsedType}),x}return H(e.data)}}_t.create=i=>new _t({typeName:A.ZodUndefined,...P(i)});class Et extends w{_parse(e){if(this._getType(e)!==C.null){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.null,received:n.parsedType}),x}return H(e.data)}}Et.create=i=>new Et({typeName:A.ZodNull,...P(i)});class St extends w{constructor(){super(...arguments),this._any=!0}_parse(e){return H(e.data)}}St.create=i=>new St({typeName:A.ZodAny,...P(i)});class Ye extends w{constructor(){super(...arguments),this._unknown=!0}_parse(e){return H(e.data)}}Ye.create=i=>new Ye({typeName:A.ZodUnknown,...P(i)});class te extends w{_parse(e){const t=this._getOrReturnCtx(e);return T(t,{code:y.invalid_type,expected:C.never,received:t.parsedType}),x}}te.create=i=>new te({typeName:A.ZodNever,...P(i)});class At extends w{_parse(e){if(this._getType(e)!==C.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.void,received:n.parsedType}),x}return H(e.data)}}At.create=i=>new At({typeName:A.ZodVoid,...P(i)});class K extends w{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==C.array)return T(t,{code:y.invalid_type,expected:C.array,received:t.parsedType}),x;if(o.exactLength!==null){const a=t.data.length>o.exactLength.value,u=t.data.length<o.exactLength.value;(a||u)&&(T(t,{code:a?y.too_big:y.too_small,minimum:u?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(T(t,{code:y.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(T(t,{code:y.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,u)=>o.type._parseAsync(new z(t,a,t.path,u)))).then(a=>b.mergeArray(n,a));const l=[...t.data].map((a,u)=>o.type._parseSync(new z(t,a,t.path,u)));return b.mergeArray(n,l)}get element(){return this._def.type}min(e,t){return new K({...this._def,minLength:{value:e,message:_.toString(t)}})}max(e,t){return new K({...this._def,maxLength:{value:e,message:_.toString(t)}})}length(e,t){return new K({...this._def,exactLength:{value:e,message:_.toString(t)}})}nonempty(e){return this.min(1,e)}}K.create=(i,e)=>new K({type:i,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...P(e)});function ue(i){if(i instanceof B){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=ee.create(ue(n))}return new B({...i._def,shape:()=>e})}else return i instanceof K?new K({...i._def,type:ue(i.element)}):i instanceof ee?ee.create(ue(i.unwrap())):i instanceof he?he.create(ue(i.unwrap())):i instanceof le?le.create(i.items.map(e=>ue(e))):i}class B extends w{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=V.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==C.object){const c=this._getOrReturnCtx(e);return T(c,{code:y.invalid_type,expected:C.object,received:c.parsedType}),x}const{status:n,ctx:o}=this._processInputParams(e),{shape:l,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof te&&this._def.unknownKeys==="strip"))for(const c in o.data)a.includes(c)||u.push(c);const d=[];for(const c of a){const f=l[c],p=o.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new z(o,p,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof te){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(c==="strict")u.length>0&&(T(o,{code:y.unrecognized_keys,keys:u}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=o.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new z(o,p,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const p=await f.key,m=await f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>b.mergeObjectSync(n,c)):b.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new B({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var l,a;const o=((a=(l=this._def).errorMap)==null?void 0:a.call(l,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:_.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new B({...this._def,unknownKeys:"strip"})}passthrough(){return new B({...this._def,unknownKeys:"passthrough"})}extend(e){return new B({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new B({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new B({...this._def,catchall:e})}pick(e){const t={};for(const n of V.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new B({...this._def,shape:()=>t})}omit(e){const t={};for(const n of V.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new B({...this._def,shape:()=>t})}deepPartial(){return ue(this)}partial(e){const t={};for(const n of V.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new B({...this._def,shape:()=>t})}required(e){const t={};for(const n of V.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let l=this.shape[n];for(;l instanceof ee;)l=l._def.innerType;t[n]=l}return new B({...this._def,shape:()=>t})}keyof(){return Wn(V.objectKeys(this.shape))}}B.create=(i,e)=>new B({shape:()=>i,unknownKeys:"strip",catchall:te.create(),typeName:A.ZodObject,...P(e)});B.strictCreate=(i,e)=>new B({shape:()=>i,unknownKeys:"strict",catchall:te.create(),typeName:A.ZodObject,...P(e)});B.lazycreate=(i,e)=>new B({shape:i,unknownKeys:"strip",catchall:te.create(),typeName:A.ZodObject,...P(e)});class ke extends w{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(l){for(const u of l)if(u.result.status==="valid")return u.result;for(const u of l)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const a=l.map(u=>new Q(u.ctx.common.issues));return T(t,{code:y.invalid_union,unionErrors:a}),x}if(t.common.async)return Promise.all(n.map(async l=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(o);{let l;const a=[];for(const d of n){const c={...t,common:{...t.common,issues:[]},parent:null},f=d._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!l&&(l={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const u=a.map(d=>new Q(d));return T(t,{code:y.invalid_union,unionErrors:u}),x}}get options(){return this._def.options}}ke.create=(i,e)=>new ke({options:i,typeName:A.ZodUnion,...P(e)});function Ke(i,e){const t=j(i),n=j(e);if(i===e)return{valid:!0,data:i};if(t===C.object&&n===C.object){const o=V.objectKeys(e),l=V.objectKeys(i).filter(u=>o.indexOf(u)!==-1),a={...i,...e};for(const u of l){const d=Ke(i[u],e[u]);if(!d.valid)return{valid:!1};a[u]=d.data}return{valid:!0,data:a}}else if(t===C.array&&n===C.array){if(i.length!==e.length)return{valid:!1};const o=[];for(let l=0;l<i.length;l++){const a=i[l],u=e[l],d=Ke(a,u);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return t===C.date&&n===C.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Ve extends w{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(l,a)=>{if(yt(l)||yt(a))return x;const u=Ke(l.value,a.value);return u.valid?((vt(l)||vt(a))&&t.dirty(),{status:t.value,value:u.data}):(T(n,{code:y.invalid_intersection_types}),x)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([l,a])=>o(l,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ve.create=(i,e,t)=>new Ve({left:i,right:e,typeName:A.ZodIntersection,...P(t)});class le extends w{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.array)return T(n,{code:y.invalid_type,expected:C.array,received:n.parsedType}),x;if(n.data.length<this._def.items.length)return T(n,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&n.data.length>this._def.items.length&&(T(n,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...n.data].map((a,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new z(n,a,n.path,u)):null}).filter(a=>!!a);return n.common.async?Promise.all(l).then(a=>b.mergeArray(t,a)):b.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new le({...this._def,rest:e})}}le.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new le({items:i,typeName:A.ZodTuple,rest:null,...P(e)})};class Le extends w{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.object)return T(n,{code:y.invalid_type,expected:C.object,received:n.parsedType}),x;const o=[],l=this._def.keyType,a=this._def.valueType;for(const u in n.data)o.push({key:l._parse(new z(n,u,n.path,u)),value:a._parse(new z(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?b.mergeObjectAsync(t,o):b.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof w?new Le({keyType:e,valueType:t,typeName:A.ZodRecord,...P(n)}):new Le({keyType:Y.create(),valueType:e,typeName:A.ZodRecord,...P(t)})}}class It extends w{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.map)return T(n,{code:y.invalid_type,expected:C.map,received:n.parsedType}),x;const o=this._def.keyType,l=this._def.valueType,a=[...n.data.entries()].map(([u,d],c)=>({key:o._parse(new z(n,u,n.path,[c,"key"])),value:l._parse(new z(n,d,n.path,[c,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of a){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return x;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const d of a){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return x;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}}}}It.create=(i,e,t)=>new It({valueType:e,keyType:i,typeName:A.ZodMap,...P(t)});class Se extends w{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.set)return T(n,{code:y.invalid_type,expected:C.set,received:n.parsedType}),x;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(T(n,{code:y.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(T(n,{code:y.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const l=this._def.valueType;function a(d){const c=new Set;for(const f of d){if(f.status==="aborted")return x;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const u=[...n.data.values()].map((d,c)=>l._parse(new z(n,d,n.path,c)));return n.common.async?Promise.all(u).then(d=>a(d)):a(u)}min(e,t){return new Se({...this._def,minSize:{value:e,message:_.toString(t)}})}max(e,t){return new Se({...this._def,maxSize:{value:e,message:_.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Se.create=(i,e)=>new Se({valueType:i,minSize:null,maxSize:null,typeName:A.ZodSet,...P(e)});class ze extends w{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ze.create=(i,e)=>new ze({getter:i,typeName:A.ZodLazy,...P(e)});class xt extends w{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return T(t,{received:t.data,code:y.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}}xt.create=(i,e)=>new xt({value:i,typeName:A.ZodLiteral,...P(e)});function Wn(i,e){return new pe({values:i,typeName:A.ZodEnum,...P(e)})}class pe extends w{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return T(t,{expected:V.joinValues(n),received:t.parsedType,code:y.invalid_type}),x}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return T(t,{received:t.data,code:y.invalid_enum_value,options:n}),x}return H(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return pe.create(e,{...this._def,...t})}exclude(e,t=this._def){return pe.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}pe.create=Wn;class Mt extends w{_parse(e){const t=V.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==C.string&&n.parsedType!==C.number){const o=V.objectValues(t);return T(n,{expected:V.joinValues(o),received:n.parsedType,code:y.invalid_type}),x}if(this._cache||(this._cache=new Set(V.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=V.objectValues(t);return T(n,{received:n.data,code:y.invalid_enum_value,options:o}),x}return H(e.data)}get enum(){return this._def.values}}Mt.create=(i,e)=>new Mt({values:i,typeName:A.ZodNativeEnum,...P(e)});class Fe extends w{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.promise&&t.common.async===!1)return T(t,{code:y.invalid_type,expected:C.promise,received:t.parsedType}),x;const n=t.parsedType===C.promise?t.data:Promise.resolve(t.data);return H(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Fe.create=(i,e)=>new Fe({type:i,typeName:A.ZodPromise,...P(e)});class me extends w{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,l={addIssue:a=>{T(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(l.addIssue=l.addIssue.bind(l),o.type==="preprocess"){const a=o.transform(n.data,l);if(n.common.async)return Promise.resolve(a).then(async u=>{if(t.value==="aborted")return x;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?x:d.status==="dirty"||t.value==="dirty"?Te(d.value):d});{if(t.value==="aborted")return x;const u=this._def.schema._parseSync({data:a,path:n.path,parent:n});return u.status==="aborted"?x:u.status==="dirty"||t.value==="dirty"?Te(u.value):u}}if(o.type==="refinement"){const a=u=>{const d=o.refinement(u,l);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?x:(u.status==="dirty"&&t.dirty(),a(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?x:(u.status==="dirty"&&t.dirty(),a(u.value).then(()=>({status:t.value,value:u.value}))))}if(o.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!de(a))return x;const u=o.transform(a.value,l);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>de(a)?Promise.resolve(o.transform(a.value,l)).then(u=>({status:t.value,value:u})):x);V.assertNever(o)}}me.create=(i,e,t)=>new me({schema:i,typeName:A.ZodEffects,effect:e,...P(t)});me.createWithPreprocess=(i,e,t)=>new me({schema:e,effect:{type:"preprocess",transform:i},typeName:A.ZodEffects,...P(t)});class ee extends w{_parse(e){return this._getType(e)===C.undefined?H(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ee.create=(i,e)=>new ee({innerType:i,typeName:A.ZodOptional,...P(e)});class he extends w{_parse(e){return this._getType(e)===C.null?H(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}he.create=(i,e)=>new he({innerType:i,typeName:A.ZodNullable,...P(e)});class Xe extends w{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===C.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Xe.create=(i,e)=>new Xe({innerType:i,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...P(e)});class Qe extends w{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ne(o)?o.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Q(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Q(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Qe.create=(i,e)=>new Qe({innerType:i,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...P(e)});class Rt extends w{_parse(e){if(this._getType(e)!==C.nan){const n=this._getOrReturnCtx(e);return T(n,{code:y.invalid_type,expected:C.nan,received:n.parsedType}),x}return{status:"valid",value:e.data}}}Rt.create=i=>new Rt({typeName:A.ZodNaN,...P(i)});class bi extends w{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ct extends w{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?x:l.status==="dirty"?(t.dirty(),Te(l.value)):this._def.out._parseAsync({data:l.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?x:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new ct({in:e,out:t,typeName:A.ZodPipeline})}}class je extends w{_parse(e){const t=this._def.innerType._parse(e),n=o=>(de(o)&&(o.value=Object.freeze(o.value)),o);return Ne(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}je.create=(i,e)=>new je({innerType:i,typeName:A.ZodReadonly,...P(e)});var A;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(A||(A={}));const oe=Y.create,Pt=re.create;se.create;const Oi=De.create;fe.create;const wt=Ye.create;te.create;const Ce=K.create,Hi=B.create,Ji=ke.create;Ve.create;le.create;const Wi=Le.create,Zi=ze.create,Yi=pe.create;Fe.create;ee.create;he.create;const ae={string:i=>Y.create({...i,coerce:!0}),number:i=>re.create({...i,coerce:!0}),boolean:i=>De.create({...i,coerce:!0}),bigint:i=>se.create({...i,coerce:!0}),date:i=>fe.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ki,zi;function Xi(){return{geminiUrl:Ki,vertexUrl:zi}}function Qi(i,e,t){var n,o,l;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const a=Xi();return i.vertexai?(o=a.vertexUrl)!==null&&o!==void 0?o:e:(l=a.geminiUrl)!==null&&l!==void 0?l:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ae{}function S(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function s(i,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in i))if(Array.isArray(t))i[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(i[u])){const d=i[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const f=d[c];s(f,e.slice(l+1),t[c])}else for(const c of d)s(c,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in i||(i[u]=[{}]);const d=i[u];s(d[0],e.slice(l+1),t);return}(!i[a]||typeof i[a]!="object")&&(i[a]={}),i=i[a]}const n=e[e.length-1],o=i[n];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function r(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const o=n.slice(0,-2);if(o in i){const l=i[o];return Array.isArray(l)?l.map(a=>r(a,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nt;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nt||(Nt={}));var Dt;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Dt||(Dt={}));var Z;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Z||(Z={}));var kt;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(kt||(kt={}));var Vt;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Vt||(Vt={}));var Lt;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Lt||(Lt={}));var Ft;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ft||(Ft={}));var Ut;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Ut||(Ut={}));var Gt;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY"})(Gt||(Gt={}));var qt;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(qt||(qt={}));var Bt;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bt||(Bt={}));var $t;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})($t||($t={}));var bt;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bt||(bt={}));var Ue;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Ue||(Ue={}));var Ot;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ot||(Ot={}));var et;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(et||(et={}));var Ht;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ht||(Ht={}));var Jt;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Jt||(Jt={}));var Wt;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Wt||(Wt={}));var Zt;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Zt||(Zt={}));var Yt;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Yt||(Yt={}));var Kt;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Kt||(Kt={}));var zt;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(zt||(zt={}));var Xt;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Xt||(Xt={}));var Qt;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(Qt||(Qt={}));var jt;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(jt||(jt={}));var en;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(en||(en={}));var tn;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(tn||(tn={}));var nn;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(nn||(nn={}));var on;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(on||(on={}));var rn;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(rn||(rn={}));var sn;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(sn||(sn={}));var ln;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ln||(ln={}));var an;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(an||(an={}));var un;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(un||(un={}));var cn;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cn||(cn={}));var dn;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(dn||(dn={}));var fn;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fn||(fn={}));var ce;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(ce||(ce={}));class ve{get text(){var e,t,n,o,l,a,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,t,n,o,l,a,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,n,o,l,a,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,n,o,l,a,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,n,o,l,a,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class pn{}class mn{}class ji{}class eo{}class hn{}class gn{}class yn{}class to{}class vn{}class Tn{}class Cn{}class no{}class tt{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class io{}class oo{}class ro{get text(){var e,t,n;let o="",l=!1;const a=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,o+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,n;let o="";const l=[];for(const a of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(o+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class so{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Zn(i,e){const t=G(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function Yn(i,e){return Array.isArray(e)?e.map(t=>Ge(i,t)):[Ge(i,e)]}function Ge(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function lo(i,e){const t=Ge(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ao(i,e){const t=Ge(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function _n(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Kn(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>_n(i,t)):[_n(i,e)]}function nt(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function En(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Sn(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function O(i,e){if(e==null)throw new Error("ContentUnion is required");return nt(e)?e:{role:"user",parts:Kn(i,e)}}function zn(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=O(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=O(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>O(i,t)):[O(i,e)]}function J(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(En(e)||Sn(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[O(i,e)]}const t=[],n=[],o=nt(e[0]);for(const l of e){const a=nt(l);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(l);else{if(En(l)||Sn(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return o||t.push({role:"user",parts:Kn(i,n)}),t}const An=Yi(["string","number","integer","object","array","boolean","null"]),uo=Ji([An,Ce(An)]);function co(i=!0){const e=Zi(()=>{const t=Hi({type:uo.optional(),format:oe().optional(),title:oe().optional(),description:oe().optional(),default:wt().optional(),items:e.optional(),minItems:ae.string().optional(),maxItems:ae.string().optional(),enum:Ce(wt()).optional(),properties:Wi(oe(),e).optional(),required:Ce(oe()).optional(),minProperties:ae.string().optional(),maxProperties:ae.string().optional(),propertyOrdering:Ce(oe()).optional(),minimum:Pt().optional(),maximum:Pt().optional(),minLength:ae.string().optional(),maxLength:ae.string().optional(),pattern:oe().optional(),anyOf:Ce(e).optional(),additionalProperties:Oi().optional()});return i?t.strict():t});return e}function fo(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(Z).includes(t[0].toUpperCase())?Z[t[0].toUpperCase()]:Z.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(Z).includes(n.toUpperCase())?Z[n.toUpperCase()]:Z.TYPE_UNSPECIFIED})}}function _e(i){const e={},t=["items"],n=["anyOf"],o=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=i.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,i=l[1]):l[1].type==="null"&&(e.nullable=!0,i=l[0])),i.type instanceof Array&&fo(i.type,e);for(const[a,u]of Object.entries(i))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.keys(Z).includes(u.toUpperCase())?u.toUpperCase():Z.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=_e(u);else if(n.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(_e(c))}e[a]=d}else if(o.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=_e(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function qe(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=co().parse(e);return _e(t)}else return _e(e)}function Xn(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Qn(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Be(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=qe(i,t.parameters)),t.response&&(t.response=qe(i,t.response));return e}function $e(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function po(i,e,t,n=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ne(i,e){if(typeof e!="string")throw new Error("name must be a string");return po(i,e,"cachedContents")}function jn(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ie(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function mo(i){return i!=null&&typeof i=="object"&&"name"in i}function ho(i){return i!=null&&typeof i=="object"&&"video"in i}function go(i){return i!=null&&typeof i=="object"&&"uri"in i}function ei(i,e){var t;let n;if(mo(e)&&(n=e.name),!(go(e)&&(n=e.uri,n===void 0))&&!(ho(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ti(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function ni(i,e){for(const t of["models","tunedModels","publisherModels"])if(yo(e,t))return e[t];return[]}function yo(i,e){return i!==null&&typeof i=="object"&&e in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vo(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function To(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Co(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function _o(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],vo(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],To(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Co(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function In(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>_o(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Eo(i,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const o=r(e,["description"]);o!=null&&s(t,["description"],o);const l=r(e,["name"]);l!=null&&s(t,["name"],l);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function So(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function Ao(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],So(i,n)),t}function Io(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function xo(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Io(i,n)),t}function Mo(){return{}}function Ro(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Eo(i,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&s(t,["googleSearch"],Ao(i,o));const l=r(e,["googleSearchRetrieval"]);if(l!=null&&s(t,["googleSearchRetrieval"],xo(i,l)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],Mo());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function Po(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&s(t,["allowedFunctionNames"],o),t}function wo(i,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&s(t,["longitude"],o),t}function No(i,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],wo(i,n));const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function Do(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Po(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&s(t,["retrievalConfig"],No(i,o)),t}function ko(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&s(t,["ttl"],o);const l=r(e,["expireTime"]);t!==void 0&&l!=null&&s(t,["expireTime"],l);const a=r(e,["displayName"]);t!==void 0&&a!=null&&s(t,["displayName"],a);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let p=J(i,u);Array.isArray(p)&&(p=p.map(m=>In(i,m))),s(t,["contents"],p)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&s(t,["systemInstruction"],In(i,O(i,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Ro(i,m))),s(t,["tools"],p)}const f=r(e,["toolConfig"]);if(t!==void 0&&f!=null&&s(t,["toolConfig"],Do(i,f)),r(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Vo(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],Zn(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],ko(i,o,t)),t}function Lo(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Fo(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Uo(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&s(t,["ttl"],o);const l=r(e,["expireTime"]);return t!==void 0&&l!=null&&s(t,["expireTime"],l),n}function Go(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],Uo(i,o,t)),t}function qo(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);return t!==void 0&&l!=null&&s(t,["_query","pageToken"],l),n}function Bo(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],qo(i,n,t)),t}function $o(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function bo(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["data"]);o!=null&&s(t,["data"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Oo(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&s(t,["fileUri"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Ho(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],$o(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],bo(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Oo(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function xn(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ho(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Jo(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const o=r(e,["name"]);o!=null&&s(t,["name"],o);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const a=r(e,["response"]);return a!=null&&s(t,["response"],a),t}function Wo(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function Zo(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Wo(i,n)),t}function Yo(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function Ko(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Yo(i,n)),t}function zo(){return{}}function Xo(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function Qo(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Xo(i,n));const o=r(e,["authType"]);o!=null&&s(t,["authType"],o);const l=r(e,["googleServiceAccountConfig"]);l!=null&&s(t,["googleServiceAccountConfig"],l);const a=r(e,["httpBasicAuthConfig"]);a!=null&&s(t,["httpBasicAuthConfig"],a);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function jo(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],Qo(i,n)),t}function er(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>Jo(i,p))),s(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&s(t,["retrieval"],o);const l=r(e,["googleSearch"]);l!=null&&s(t,["googleSearch"],Zo(i,l));const a=r(e,["googleSearchRetrieval"]);a!=null&&s(t,["googleSearchRetrieval"],Ko(i,a)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],zo());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],jo(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function tr(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&s(t,["allowedFunctionNames"],o),t}function nr(i,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&s(t,["longitude"],o),t}function ir(i,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],nr(i,n));const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function or(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],tr(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&s(t,["retrievalConfig"],ir(i,o)),t}function rr(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&s(t,["ttl"],o);const l=r(e,["expireTime"]);t!==void 0&&l!=null&&s(t,["expireTime"],l);const a=r(e,["displayName"]);t!==void 0&&a!=null&&s(t,["displayName"],a);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let m=J(i,u);Array.isArray(m)&&(m=m.map(h=>xn(i,h))),s(t,["contents"],m)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&s(t,["systemInstruction"],xn(i,O(i,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>er(i,h))),s(t,["tools"],m)}const f=r(e,["toolConfig"]);t!==void 0&&f!=null&&s(t,["toolConfig"],or(i,f));const p=r(e,["kmsKeyName"]);return t!==void 0&&p!=null&&s(t,["encryption_spec","kmsKeyName"],p),n}function sr(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],Zn(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],rr(i,o,t)),t}function lr(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function ar(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function ur(i,e,t){const n={},o=r(e,["ttl"]);t!==void 0&&o!=null&&s(t,["ttl"],o);const l=r(e,["expireTime"]);return t!==void 0&&l!=null&&s(t,["expireTime"],l),n}function cr(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],ne(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],ur(i,o,t)),t}function dr(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);return t!==void 0&&l!=null&&s(t,["_query","pageToken"],l),n}function fr(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],dr(i,n,t)),t}function Me(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["model"]);l!=null&&s(t,["model"],l);const a=r(e,["createTime"]);a!=null&&s(t,["createTime"],a);const u=r(e,["updateTime"]);u!=null&&s(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&s(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&s(t,["usageMetadata"],c),t}function pr(){return{}}function mr(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Me(i,a))),s(t,["cachedContents"],l)}return t}function Re(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["model"]);l!=null&&s(t,["model"],l);const a=r(e,["createTime"]);a!=null&&s(t,["createTime"],a);const u=r(e,["updateTime"]);u!=null&&s(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&s(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&s(t,["usageMetadata"],c),t}function hr(){return{}}function gr(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Re(i,a))),s(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ge;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ge||(ge={}));class be{constructor(e,t,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,o)}init(e,t,n){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};n?typeof n=="object"?a=Object.assign({},n):a=n:a={config:{}},a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(o=a.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yr extends Ae{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new be(ge.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=sr(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Re(this.apiClient,f))}else{const c=Vo(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Me(this.apiClient,f))}}async get(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=lr(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Re(this.apiClient,f))}else{const c=Lo(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Me(this.apiClient,f))}}async delete(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ar(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(()=>{const f=hr(),p=new Tn;return Object.assign(p,f),p})}else{const c=Fo(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=pr(),p=new Tn;return Object.assign(p,f),p})}}async update(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=cr(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Re(this.apiClient,f))}else{const c=Go(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Me(this.apiClient,f))}}async listInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=fr(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=gr(this.apiClient,f),m=new Cn;return Object.assign(m,p),m})}else{const c=Bo(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=mr(this.apiClient,f),m=new Cn;return Object.assign(m,p),m})}}}function Mn(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(i){return this instanceof q?(this.v=i,this):new q(i)}function Ee(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function u(h,g){n[h]&&(o[h]=function(v){return new Promise(function(E,I){l.push([h,v,E,I])>1||d(h,v)})},g&&(o[h]=g(o[h])))}function d(h,g){try{c(n[h](g))}catch(v){m(l[0][3],v)}}function c(h){h.value instanceof q?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,g){h(g),l.shift(),l.length&&d(l[0][0],l[0][1])}}function Pe(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Mn=="function"?Mn(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(l){t[l]=i[l]&&function(a){return new Promise(function(u,d){a=i[l](a),o(u,d,a.done,a.value)})}}function o(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vr(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ii(t)}function ii(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Tr(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rn(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const o=[];let l=!0;for(;n<t&&i[n].role==="model";)o.push(i[n]),l&&!ii(i[n])&&(l=!1),n++;l?e.push(...o):e.pop()}return e}class Cr{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new _r(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _r{constructor(e,t,n,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Tr(l)}async sendMessage(e){var t;await this.sendPromise;const n=O(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await o,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(n,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const n=O(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,n)}getHistory(e=!1){const t=e?Rn(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,o;return Ee(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var p=!0,m=Pe(e),h;h=yield q(m.next()),a=h.done,!a;p=!0){c=h.value,p=!1;const g=c;if(vr(g)){const v=(o=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content;v!==void 0&&f.push(v)}yield yield q(g)}}catch(g){u={error:g}}finally{try{!p&&!a&&(d=m.return)&&(yield q(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,n){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Rn(n)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Er(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);return t!==void 0&&l!=null&&s(t,["_query","pageToken"],l),n}function Sr(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Er(i,n,t)),t}function Ar(i,e){const t={},n=r(e,["details"]);n!=null&&s(t,["details"],n);const o=r(e,["message"]);o!=null&&s(t,["message"],o);const l=r(e,["code"]);return l!=null&&s(t,["code"],l),t}function Ir(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["mimeType"]);l!=null&&s(t,["mimeType"],l);const a=r(e,["sizeBytes"]);a!=null&&s(t,["sizeBytes"],a);const u=r(e,["createTime"]);u!=null&&s(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&s(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&s(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&s(t,["sha256Hash"],f);const p=r(e,["uri"]);p!=null&&s(t,["uri"],p);const m=r(e,["downloadUri"]);m!=null&&s(t,["downloadUri"],m);const h=r(e,["state"]);h!=null&&s(t,["state"],h);const g=r(e,["source"]);g!=null&&s(t,["source"],g);const v=r(e,["videoMetadata"]);v!=null&&s(t,["videoMetadata"],v);const E=r(e,["error"]);return E!=null&&s(t,["error"],Ar(i,E)),t}function xr(i,e){const t={},n=r(e,["file"]);n!=null&&s(t,["file"],Ir(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Mr(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","file"],ei(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Rr(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","file"],ei(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Pr(i,e){const t={},n=r(e,["details"]);n!=null&&s(t,["details"],n);const o=r(e,["message"]);o!=null&&s(t,["message"],o);const l=r(e,["code"]);return l!=null&&s(t,["code"],l),t}function it(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["mimeType"]);l!=null&&s(t,["mimeType"],l);const a=r(e,["sizeBytes"]);a!=null&&s(t,["sizeBytes"],a);const u=r(e,["createTime"]);u!=null&&s(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&s(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&s(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&s(t,["sha256Hash"],f);const p=r(e,["uri"]);p!=null&&s(t,["uri"],p);const m=r(e,["downloadUri"]);m!=null&&s(t,["downloadUri"],m);const h=r(e,["state"]);h!=null&&s(t,["state"],h);const g=r(e,["source"]);g!=null&&s(t,["source"],g);const v=r(e,["videoMetadata"]);v!=null&&s(t,["videoMetadata"],v);const E=r(e,["error"]);return E!=null&&s(t,["error"],Pr(i,E)),t}function wr(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>it(i,a))),s(t,["files"],l)}return t}function Nr(){return{}}function Dr(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kr extends Ae{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new be(ge.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>it(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Sr(this.apiClient,e);return l=S("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=wr(this.apiClient,d),f=new no;return Object.assign(f,c),f})}}async createInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xr(this.apiClient,e);return l=S("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Nr(),c=new io;return Object.assign(c,d),c})}}async get(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mr(this.apiClient,e);return l=S("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>it(this.apiClient,d))}}async delete(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rr(this.apiClient,e);return l=S("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Dr(),c=new oo;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vr(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Lr(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function oi(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Vr(i,n)),t}function Fr(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Lr(i,n)),t}function Ur(i,e){const t={},n=r(e,["speaker"]);n!=null&&s(t,["speaker"],n);const o=r(e,["voiceConfig"]);return o!=null&&s(t,["voiceConfig"],oi(i,o)),t}function Gr(i,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Ur(i,l))),s(t,["speakerVoiceConfigs"],o)}return t}function qr(i,e){const t={},n=r(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],oi(i,n));const o=r(e,["multiSpeakerVoiceConfig"]);o!=null&&s(t,["multiSpeakerVoiceConfig"],Gr(i,o));const l=r(e,["languageCode"]);return l!=null&&s(t,["languageCode"],l),t}function Br(i,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],Fr(i,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function $r(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function br(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function Or(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Hr(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["data"]);o!=null&&s(t,["data"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Jr(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Wr(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&s(t,["fileUri"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Zr(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],$r(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],Or(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Jr(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Yr(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],br(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],Hr(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Wr(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Kr(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Zr(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function zr(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Yr(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Xr(i,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const o=r(e,["description"]);o!=null&&s(t,["description"],o);const l=r(e,["name"]);l!=null&&s(t,["name"],l);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function Qr(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const o=r(e,["name"]);o!=null&&s(t,["name"],o);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const a=r(e,["response"]);return a!=null&&s(t,["response"],a),t}function jr(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function es(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function ts(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],jr(i,n)),t}function ns(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],es(i,n)),t}function is(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function os(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function rs(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],is(i,n)),t}function ss(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],os(i,n)),t}function ls(){return{}}function as(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function us(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],as(i,n));const o=r(e,["authType"]);o!=null&&s(t,["authType"],o);const l=r(e,["googleServiceAccountConfig"]);l!=null&&s(t,["googleServiceAccountConfig"],l);const a=r(e,["httpBasicAuthConfig"]);a!=null&&s(t,["httpBasicAuthConfig"],a);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function cs(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],us(i,n)),t}function ds(){return{}}function fs(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Xr(i,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&s(t,["googleSearch"],ts(i,o));const l=r(e,["googleSearchRetrieval"]);if(l!=null&&s(t,["googleSearchRetrieval"],rs(i,l)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],ds());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function ps(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>Qr(i,p))),s(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&s(t,["retrieval"],o);const l=r(e,["googleSearch"]);l!=null&&s(t,["googleSearch"],ns(i,l));const a=r(e,["googleSearchRetrieval"]);a!=null&&s(t,["googleSearchRetrieval"],ss(i,a)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],ls());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],cs(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function ms(i,e){const t={},n=r(e,["handle"]);if(n!=null&&s(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function hs(i,e){const t={},n=r(e,["handle"]);n!=null&&s(t,["handle"],n);const o=r(e,["transparent"]);return o!=null&&s(t,["transparent"],o),t}function Pn(){return{}}function wn(){return{}}function gs(i,e){const t={},n=r(e,["disabled"]);n!=null&&s(t,["disabled"],n);const o=r(e,["startOfSpeechSensitivity"]);o!=null&&s(t,["startOfSpeechSensitivity"],o);const l=r(e,["endOfSpeechSensitivity"]);l!=null&&s(t,["endOfSpeechSensitivity"],l);const a=r(e,["prefixPaddingMs"]);a!=null&&s(t,["prefixPaddingMs"],a);const u=r(e,["silenceDurationMs"]);return u!=null&&s(t,["silenceDurationMs"],u),t}function ys(i,e){const t={},n=r(e,["disabled"]);n!=null&&s(t,["disabled"],n);const o=r(e,["startOfSpeechSensitivity"]);o!=null&&s(t,["startOfSpeechSensitivity"],o);const l=r(e,["endOfSpeechSensitivity"]);l!=null&&s(t,["endOfSpeechSensitivity"],l);const a=r(e,["prefixPaddingMs"]);a!=null&&s(t,["prefixPaddingMs"],a);const u=r(e,["silenceDurationMs"]);return u!=null&&s(t,["silenceDurationMs"],u),t}function vs(i,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],gs(i,n));const o=r(e,["activityHandling"]);o!=null&&s(t,["activityHandling"],o);const l=r(e,["turnCoverage"]);return l!=null&&s(t,["turnCoverage"],l),t}function Ts(i,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],ys(i,n));const o=r(e,["activityHandling"]);o!=null&&s(t,["activityHandling"],o);const l=r(e,["turnCoverage"]);return l!=null&&s(t,["turnCoverage"],l),t}function Cs(i,e){const t={},n=r(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function _s(i,e){const t={},n=r(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function Es(i,e){const t={},n=r(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const o=r(e,["slidingWindow"]);return o!=null&&s(t,["slidingWindow"],Cs(i,o)),t}function Ss(i,e){const t={},n=r(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const o=r(e,["slidingWindow"]);return o!=null&&s(t,["slidingWindow"],_s(i,o)),t}function As(i,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function Is(i,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function xs(i,e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&s(t,["setup","generationConfig"],o);const l=r(e,["responseModalities"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","responseModalities"],l);const a=r(e,["temperature"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","temperature"],a);const u=r(e,["topP"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&s(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","mediaResolution"],f);const p=r(e,["seed"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","seed"],p);const m=r(e,["speechConfig"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","speechConfig"],qr(i,Qn(i,m)));const h=r(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Kr(i,O(i,g)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let L=$e(i,v);Array.isArray(L)&&(L=L.map(U=>fs(i,Be(i,U)))),s(t,["setup","tools"],L)}const E=r(e,["sessionResumption"]);t!==void 0&&E!=null&&s(t,["setup","sessionResumption"],ms(i,E));const I=r(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&s(t,["setup","inputAudioTranscription"],Pn());const M=r(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&s(t,["setup","outputAudioTranscription"],Pn());const R=r(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&s(t,["setup","realtimeInputConfig"],vs(i,R));const D=r(e,["contextWindowCompression"]);t!==void 0&&D!=null&&s(t,["setup","contextWindowCompression"],Es(i,D));const k=r(e,["proactivity"]);return t!==void 0&&k!=null&&s(t,["setup","proactivity"],As(i,k)),n}function Ms(i,e,t){const n={},o=r(e,["generationConfig"]);t!==void 0&&o!=null&&s(t,["setup","generationConfig"],o);const l=r(e,["responseModalities"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","responseModalities"],l);const a=r(e,["temperature"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","temperature"],a);const u=r(e,["topP"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&s(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","mediaResolution"],f);const p=r(e,["seed"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","seed"],p);const m=r(e,["speechConfig"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","speechConfig"],Br(i,Qn(i,m)));const h=r(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],zr(i,O(i,g)));const v=r(e,["tools"]);if(t!==void 0&&v!=null){let L=$e(i,v);Array.isArray(L)&&(L=L.map(U=>ps(i,Be(i,U)))),s(t,["setup","tools"],L)}const E=r(e,["sessionResumption"]);t!==void 0&&E!=null&&s(t,["setup","sessionResumption"],hs(i,E));const I=r(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&s(t,["setup","inputAudioTranscription"],wn());const M=r(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&s(t,["setup","outputAudioTranscription"],wn());const R=r(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&s(t,["setup","realtimeInputConfig"],Ts(i,R));const D=r(e,["contextWindowCompression"]);t!==void 0&&D!=null&&s(t,["setup","contextWindowCompression"],Ss(i,D));const k=r(e,["proactivity"]);return t!==void 0&&k!=null&&s(t,["setup","proactivity"],Is(i,k)),n}function Rs(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["setup","model"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],xs(i,o,t)),t}function Ps(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["setup","model"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],Ms(i,o,t)),t}function ws(){return{}}function Ns(){return{}}function Ds(){return{}}function ks(){return{}}function Vs(i,e){const t={},n=r(e,["media"]);n!=null&&s(t,["mediaChunks"],Yn(i,n));const o=r(e,["audio"]);o!=null&&s(t,["audio"],ao(i,o));const l=r(e,["audioStreamEnd"]);l!=null&&s(t,["audioStreamEnd"],l);const a=r(e,["video"]);a!=null&&s(t,["video"],lo(i,a));const u=r(e,["text"]);return u!=null&&s(t,["text"],u),r(e,["activityStart"])!=null&&s(t,["activityStart"],ws()),r(e,["activityEnd"])!=null&&s(t,["activityEnd"],Ds()),t}function Ls(i,e){const t={},n=r(e,["media"]);if(n!=null&&s(t,["mediaChunks"],Yn(i,n)),r(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=r(e,["audioStreamEnd"]);if(o!=null&&s(t,["audioStreamEnd"],o),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(r(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return r(e,["activityStart"])!=null&&s(t,["activityStart"],Ns()),r(e,["activityEnd"])!=null&&s(t,["activityEnd"],ks()),t}function ri(i,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const o=r(e,["weight"]);return o!=null&&s(t,["weight"],o),t}function Fs(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ri(i,l))),s(t,["weightedPrompts"],o)}return t}function si(i,e){const t={},n=r(e,["temperature"]);n!=null&&s(t,["temperature"],n);const o=r(e,["topK"]);o!=null&&s(t,["topK"],o);const l=r(e,["seed"]);l!=null&&s(t,["seed"],l);const a=r(e,["guidance"]);a!=null&&s(t,["guidance"],a);const u=r(e,["bpm"]);u!=null&&s(t,["bpm"],u);const d=r(e,["density"]);d!=null&&s(t,["density"],d);const c=r(e,["brightness"]);c!=null&&s(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&s(t,["scale"],f);const p=r(e,["muteBass"]);p!=null&&s(t,["muteBass"],p);const m=r(e,["muteDrums"]);m!=null&&s(t,["muteDrums"],m);const h=r(e,["onlyBassAndDrums"]);return h!=null&&s(t,["onlyBassAndDrums"],h),t}function Us(i,e){const t={},n=r(e,["musicGenerationConfig"]);return n!=null&&s(t,["musicGenerationConfig"],si(i,n)),t}function li(i,e){const t={},n=r(e,["model"]);return n!=null&&s(t,["model"],n),t}function ai(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ri(i,l))),s(t,["weightedPrompts"],o)}return t}function ot(i,e){const t={},n=r(e,["setup"]);n!=null&&s(t,["setup"],li(i,n));const o=r(e,["clientContent"]);o!=null&&s(t,["clientContent"],ai(i,o));const l=r(e,["musicGenerationConfig"]);l!=null&&s(t,["musicGenerationConfig"],si(i,l));const a=r(e,["playbackControl"]);return a!=null&&s(t,["playbackControl"],a),t}function Gs(){return{}}function qs(){return{}}function Bs(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function $s(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function bs(i,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Os(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["data"]);o!=null&&s(t,["data"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Hs(i,e){const t={},n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Js(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&s(t,["fileUri"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Ws(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Bs(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],bs(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Hs(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Zs(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],$s(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],Os(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Js(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Ys(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ws(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Ks(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Zs(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Nn(i,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const o=r(e,["finished"]);return o!=null&&s(t,["finished"],o),t}function Dn(i,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const o=r(e,["finished"]);return o!=null&&s(t,["finished"],o),t}function zs(i,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const o=r(e,["urlRetrievalStatus"]);return o!=null&&s(t,["urlRetrievalStatus"],o),t}function Xs(i,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>zs(i,l))),s(t,["urlMetadata"],o)}return t}function Qs(i,e){const t={},n=r(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],Ys(i,n));const o=r(e,["turnComplete"]);o!=null&&s(t,["turnComplete"],o);const l=r(e,["interrupted"]);l!=null&&s(t,["interrupted"],l);const a=r(e,["groundingMetadata"]);a!=null&&s(t,["groundingMetadata"],a);const u=r(e,["generationComplete"]);u!=null&&s(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&s(t,["inputTranscription"],Nn(i,d));const c=r(e,["outputTranscription"]);c!=null&&s(t,["outputTranscription"],Nn(i,c));const f=r(e,["urlContextMetadata"]);return f!=null&&s(t,["urlContextMetadata"],Xs(i,f)),t}function js(i,e){const t={},n=r(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],Ks(i,n));const o=r(e,["turnComplete"]);o!=null&&s(t,["turnComplete"],o);const l=r(e,["interrupted"]);l!=null&&s(t,["interrupted"],l);const a=r(e,["groundingMetadata"]);a!=null&&s(t,["groundingMetadata"],a);const u=r(e,["generationComplete"]);u!=null&&s(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&s(t,["inputTranscription"],Dn(i,d));const c=r(e,["outputTranscription"]);return c!=null&&s(t,["outputTranscription"],Dn(i,c)),t}function el(i,e){const t={},n=r(e,["id"]);n!=null&&s(t,["id"],n);const o=r(e,["args"]);o!=null&&s(t,["args"],o);const l=r(e,["name"]);return l!=null&&s(t,["name"],l),t}function tl(i,e){const t={},n=r(e,["args"]);n!=null&&s(t,["args"],n);const o=r(e,["name"]);return o!=null&&s(t,["name"],o),t}function nl(i,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>el(i,l))),s(t,["functionCalls"],o)}return t}function il(i,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>tl(i,l))),s(t,["functionCalls"],o)}return t}function ol(i,e){const t={},n=r(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function rl(i,e){const t={},n=r(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function Ie(i,e){const t={},n=r(e,["modality"]);n!=null&&s(t,["modality"],n);const o=r(e,["tokenCount"]);return o!=null&&s(t,["tokenCount"],o),t}function xe(i,e){const t={},n=r(e,["modality"]);n!=null&&s(t,["modality"],n);const o=r(e,["tokenCount"]);return o!=null&&s(t,["tokenCount"],o),t}function sl(i,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const o=r(e,["cachedContentTokenCount"]);o!=null&&s(t,["cachedContentTokenCount"],o);const l=r(e,["responseTokenCount"]);l!=null&&s(t,["responseTokenCount"],l);const a=r(e,["toolUsePromptTokenCount"]);a!=null&&s(t,["toolUsePromptTokenCount"],a);const u=r(e,["thoughtsTokenCount"]);u!=null&&s(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&s(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Ie(i,g))),s(t,["promptTokensDetails"],h)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Ie(i,g))),s(t,["cacheTokensDetails"],h)}const p=r(e,["responseTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>Ie(i,g))),s(t,["responseTokensDetails"],h)}const m=r(e,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Ie(i,g))),s(t,["toolUsePromptTokensDetails"],h)}return t}function ll(i,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const o=r(e,["cachedContentTokenCount"]);o!=null&&s(t,["cachedContentTokenCount"],o);const l=r(e,["candidatesTokenCount"]);l!=null&&s(t,["responseTokenCount"],l);const a=r(e,["toolUsePromptTokenCount"]);a!=null&&s(t,["toolUsePromptTokenCount"],a);const u=r(e,["thoughtsTokenCount"]);u!=null&&s(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&s(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>xe(i,v))),s(t,["promptTokensDetails"],g)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>xe(i,v))),s(t,["cacheTokensDetails"],g)}const p=r(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>xe(i,v))),s(t,["responseTokensDetails"],g)}const m=r(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>xe(i,v))),s(t,["toolUsePromptTokensDetails"],g)}const h=r(e,["trafficType"]);return h!=null&&s(t,["trafficType"],h),t}function al(i,e){const t={},n=r(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function ul(i,e){const t={},n=r(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function cl(i,e){const t={},n=r(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const o=r(e,["resumable"]);o!=null&&s(t,["resumable"],o);const l=r(e,["lastConsumedClientMessageIndex"]);return l!=null&&s(t,["lastConsumedClientMessageIndex"],l),t}function dl(i,e){const t={},n=r(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const o=r(e,["resumable"]);o!=null&&s(t,["resumable"],o);const l=r(e,["lastConsumedClientMessageIndex"]);return l!=null&&s(t,["lastConsumedClientMessageIndex"],l),t}function fl(i,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],Gs());const o=r(e,["serverContent"]);o!=null&&s(t,["serverContent"],Qs(i,o));const l=r(e,["toolCall"]);l!=null&&s(t,["toolCall"],nl(i,l));const a=r(e,["toolCallCancellation"]);a!=null&&s(t,["toolCallCancellation"],ol(i,a));const u=r(e,["usageMetadata"]);u!=null&&s(t,["usageMetadata"],sl(i,u));const d=r(e,["goAway"]);d!=null&&s(t,["goAway"],al(i,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&s(t,["sessionResumptionUpdate"],cl(i,c)),t}function pl(i,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],qs());const o=r(e,["serverContent"]);o!=null&&s(t,["serverContent"],js(i,o));const l=r(e,["toolCall"]);l!=null&&s(t,["toolCall"],il(i,l));const a=r(e,["toolCallCancellation"]);a!=null&&s(t,["toolCallCancellation"],rl(i,a));const u=r(e,["usageMetadata"]);u!=null&&s(t,["usageMetadata"],ll(i,u));const d=r(e,["goAway"]);d!=null&&s(t,["goAway"],ul(i,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&s(t,["sessionResumptionUpdate"],dl(i,c)),t}function ml(){return{}}function hl(i,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const o=r(e,["weight"]);return o!=null&&s(t,["weight"],o),t}function gl(i,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>hl(i,l))),s(t,["weightedPrompts"],o)}return t}function yl(i,e){const t={},n=r(e,["temperature"]);n!=null&&s(t,["temperature"],n);const o=r(e,["topK"]);o!=null&&s(t,["topK"],o);const l=r(e,["seed"]);l!=null&&s(t,["seed"],l);const a=r(e,["guidance"]);a!=null&&s(t,["guidance"],a);const u=r(e,["bpm"]);u!=null&&s(t,["bpm"],u);const d=r(e,["density"]);d!=null&&s(t,["density"],d);const c=r(e,["brightness"]);c!=null&&s(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&s(t,["scale"],f);const p=r(e,["muteBass"]);p!=null&&s(t,["muteBass"],p);const m=r(e,["muteDrums"]);m!=null&&s(t,["muteDrums"],m);const h=r(e,["onlyBassAndDrums"]);return h!=null&&s(t,["onlyBassAndDrums"],h),t}function vl(i,e){const t={},n=r(e,["clientContent"]);n!=null&&s(t,["clientContent"],gl(i,n));const o=r(e,["musicGenerationConfig"]);return o!=null&&s(t,["musicGenerationConfig"],yl(i,o)),t}function Tl(i,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);o!=null&&s(t,["mimeType"],o);const l=r(e,["sourceMetadata"]);return l!=null&&s(t,["sourceMetadata"],vl(i,l)),t}function Cl(i,e){const t={},n=r(e,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Tl(i,l))),s(t,["audioChunks"],o)}return t}function _l(i,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const o=r(e,["filteredReason"]);return o!=null&&s(t,["filteredReason"],o),t}function El(i,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],ml());const o=r(e,["serverContent"]);o!=null&&s(t,["serverContent"],Cl(i,o));const l=r(e,["filteredPrompt"]);return l!=null&&s(t,["filteredPrompt"],_l(i,l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sl(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function Al(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function Il(i,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function xl(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Sl(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],Al(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Il(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Oe(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>xl(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function Ml(i,e){const t={},n=r(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const o=r(e,["default"]);o!=null&&s(t,["default"],o);const l=r(e,["description"]);l!=null&&s(t,["description"],l);const a=r(e,["enum"]);a!=null&&s(t,["enum"],a);const u=r(e,["example"]);u!=null&&s(t,["example"],u);const d=r(e,["format"]);d!=null&&s(t,["format"],d);const c=r(e,["items"]);c!=null&&s(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&s(t,["maxItems"],f);const p=r(e,["maxLength"]);p!=null&&s(t,["maxLength"],p);const m=r(e,["maxProperties"]);m!=null&&s(t,["maxProperties"],m);const h=r(e,["maximum"]);h!=null&&s(t,["maximum"],h);const g=r(e,["minItems"]);g!=null&&s(t,["minItems"],g);const v=r(e,["minLength"]);v!=null&&s(t,["minLength"],v);const E=r(e,["minProperties"]);E!=null&&s(t,["minProperties"],E);const I=r(e,["minimum"]);I!=null&&s(t,["minimum"],I);const M=r(e,["nullable"]);M!=null&&s(t,["nullable"],M);const R=r(e,["pattern"]);R!=null&&s(t,["pattern"],R);const D=r(e,["properties"]);D!=null&&s(t,["properties"],D);const k=r(e,["propertyOrdering"]);k!=null&&s(t,["propertyOrdering"],k);const L=r(e,["required"]);L!=null&&s(t,["required"],L);const U=r(e,["title"]);U!=null&&s(t,["title"],U);const $=r(e,["type"]);return $!=null&&s(t,["type"],$),t}function Rl(i,e){const t={};if(r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(e,["category"]);n!=null&&s(t,["category"],n);const o=r(e,["threshold"]);return o!=null&&s(t,["threshold"],o),t}function Pl(i,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const o=r(e,["description"]);o!=null&&s(t,["description"],o);const l=r(e,["name"]);l!=null&&s(t,["name"],l);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function wl(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function Nl(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],wl(i,n)),t}function Dl(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function kl(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Dl(i,n)),t}function Vl(){return{}}function Ll(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Pl(i,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(e,["googleSearch"]);o!=null&&s(t,["googleSearch"],Nl(i,o));const l=r(e,["googleSearchRetrieval"]);if(l!=null&&s(t,["googleSearchRetrieval"],kl(i,l)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],Vl());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function Fl(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&s(t,["allowedFunctionNames"],o),t}function Ul(i,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&s(t,["longitude"],o),t}function Gl(i,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],Ul(i,n));const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function ql(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Fl(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&s(t,["retrievalConfig"],Gl(i,o)),t}function Bl(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function ui(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Bl(i,n)),t}function $l(i,e){const t={},n=r(e,["speaker"]);n!=null&&s(t,["speaker"],n);const o=r(e,["voiceConfig"]);return o!=null&&s(t,["voiceConfig"],ui(i,o)),t}function bl(i,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>$l(i,l))),s(t,["speakerVoiceConfigs"],o)}return t}function Ol(i,e){const t={},n=r(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],ui(i,n));const o=r(e,["multiSpeakerVoiceConfig"]);o!=null&&s(t,["multiSpeakerVoiceConfig"],bl(i,o));const l=r(e,["languageCode"]);return l!=null&&s(t,["languageCode"],l),t}function Hl(i,e){const t={},n=r(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const o=r(e,["thinkingBudget"]);return o!=null&&s(t,["thinkingBudget"],o),t}function Jl(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&s(t,["systemInstruction"],Oe(i,O(i,o)));const l=r(e,["temperature"]);l!=null&&s(n,["temperature"],l);const a=r(e,["topP"]);a!=null&&s(n,["topP"],a);const u=r(e,["topK"]);u!=null&&s(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(e,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(e,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(e,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(e,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const v=r(e,["seed"]);v!=null&&s(n,["seed"],v);const E=r(e,["responseMimeType"]);E!=null&&s(n,["responseMimeType"],E);const I=r(e,["responseSchema"]);if(I!=null&&s(n,["responseSchema"],Ml(i,qe(i,I))),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=r(e,["safetySettings"]);if(t!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(W=>Rl(i,W))),s(t,["safetySettings"],F)}const R=r(e,["tools"]);if(t!==void 0&&R!=null){let F=$e(i,R);Array.isArray(F)&&(F=F.map(W=>Ll(i,Be(i,W)))),s(t,["tools"],F)}const D=r(e,["toolConfig"]);if(t!==void 0&&D!=null&&s(t,["toolConfig"],ql(i,D)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=r(e,["cachedContent"]);t!==void 0&&k!=null&&s(t,["cachedContent"],ne(i,k));const L=r(e,["responseModalities"]);L!=null&&s(n,["responseModalities"],L);const U=r(e,["mediaResolution"]);U!=null&&s(n,["mediaResolution"],U);const $=r(e,["speechConfig"]);if($!=null&&s(n,["speechConfig"],Ol(i,Xn(i,$))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=r(e,["thinkingConfig"]);return N!=null&&s(n,["thinkingConfig"],Hl(i,N)),n}function kn(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let a=J(i,o);Array.isArray(a)&&(a=a.map(u=>Oe(i,u))),s(t,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(t,["generationConfig"],Jl(i,l,t)),t}function Wl(i,e,t){const n={},o=r(e,["taskType"]);t!==void 0&&o!=null&&s(t,["requests[]","taskType"],o);const l=r(e,["title"]);t!==void 0&&l!=null&&s(t,["requests[]","title"],l);const a=r(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&s(t,["requests[]","outputDimensionality"],a),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Zl(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);o!=null&&s(t,["requests[]","content"],zn(i,o));const l=r(e,["config"]);l!=null&&s(t,["config"],Wl(i,l,t));const a=r(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],G(i,a)),t}function Yl(i,e,t){const n={};if(r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(e,["numberOfImages"]);t!==void 0&&o!=null&&s(t,["parameters","sampleCount"],o);const l=r(e,["aspectRatio"]);t!==void 0&&l!=null&&s(t,["parameters","aspectRatio"],l);const a=r(e,["guidanceScale"]);if(t!==void 0&&a!=null&&s(t,["parameters","guidanceScale"],a),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&s(t,["parameters","safetySetting"],u);const d=r(e,["personGeneration"]);t!==void 0&&d!=null&&s(t,["parameters","personGeneration"],d);const c=r(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&s(t,["parameters","includeSafetyAttributes"],c);const f=r(e,["includeRaiReason"]);t!==void 0&&f!=null&&s(t,["parameters","includeRaiReason"],f);const p=r(e,["language"]);t!==void 0&&p!=null&&s(t,["parameters","language"],p);const m=r(e,["outputMimeType"]);t!==void 0&&m!=null&&s(t,["parameters","outputOptions","mimeType"],m);const h=r(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&s(t,["parameters","outputOptions","compressionQuality"],h),r(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Kl(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&s(t,["instances[0]","prompt"],o);const l=r(e,["config"]);return l!=null&&s(t,["config"],Yl(i,l,t)),t}function zl(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Xl(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=r(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],ti(i,u)),n}function Ql(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Xl(i,n,t)),t}function jl(i,e,t){const n={},o=r(e,["displayName"]);t!==void 0&&o!=null&&s(t,["displayName"],o);const l=r(e,["description"]);t!==void 0&&l!=null&&s(t,["description"],l);const a=r(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&s(t,["defaultCheckpointId"],a),n}function ea(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],jl(i,o,t)),t}function ta(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function na(i,e){const t={};if(r(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function ia(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let a=J(i,o);Array.isArray(a)&&(a=a.map(u=>Oe(i,u))),s(t,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(t,["config"],na(i,l)),t}function oa(i,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["imageBytes"]);n!=null&&s(t,["bytesBase64Encoded"],ie(i,n));const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function ra(i,e,t){const n={},o=r(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&s(t,["parameters","sampleCount"],o),r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=r(e,["durationSeconds"]);if(t!==void 0&&l!=null&&s(t,["parameters","durationSeconds"],l),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(e,["aspectRatio"]);if(t!==void 0&&a!=null&&s(t,["parameters","aspectRatio"],a),r(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=r(e,["personGeneration"]);if(t!==void 0&&u!=null&&s(t,["parameters","personGeneration"],u),r(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=r(e,["negativePrompt"]);if(t!==void 0&&d!=null&&s(t,["parameters","negativePrompt"],d),r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(r(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function sa(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&s(t,["instances[0]","prompt"],o);const l=r(e,["image"]);l!=null&&s(t,["instances[0]","image"],oa(i,l));const a=r(e,["config"]);return a!=null&&s(t,["config"],ra(i,a,t)),t}function la(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function aa(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["data"]);o!=null&&s(t,["data"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function ua(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&s(t,["fileUri"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function ca(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],la(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],aa(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],ua(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function ye(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ca(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function da(i,e){const t={},n=r(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const o=r(e,["default"]);o!=null&&s(t,["default"],o);const l=r(e,["description"]);l!=null&&s(t,["description"],l);const a=r(e,["enum"]);a!=null&&s(t,["enum"],a);const u=r(e,["example"]);u!=null&&s(t,["example"],u);const d=r(e,["format"]);d!=null&&s(t,["format"],d);const c=r(e,["items"]);c!=null&&s(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&s(t,["maxItems"],f);const p=r(e,["maxLength"]);p!=null&&s(t,["maxLength"],p);const m=r(e,["maxProperties"]);m!=null&&s(t,["maxProperties"],m);const h=r(e,["maximum"]);h!=null&&s(t,["maximum"],h);const g=r(e,["minItems"]);g!=null&&s(t,["minItems"],g);const v=r(e,["minLength"]);v!=null&&s(t,["minLength"],v);const E=r(e,["minProperties"]);E!=null&&s(t,["minProperties"],E);const I=r(e,["minimum"]);I!=null&&s(t,["minimum"],I);const M=r(e,["nullable"]);M!=null&&s(t,["nullable"],M);const R=r(e,["pattern"]);R!=null&&s(t,["pattern"],R);const D=r(e,["properties"]);D!=null&&s(t,["properties"],D);const k=r(e,["propertyOrdering"]);k!=null&&s(t,["propertyOrdering"],k);const L=r(e,["required"]);L!=null&&s(t,["required"],L);const U=r(e,["title"]);U!=null&&s(t,["title"],U);const $=r(e,["type"]);return $!=null&&s(t,["type"],$),t}function fa(i,e){const t={},n=r(e,["featureSelectionPreference"]);return n!=null&&s(t,["featureSelectionPreference"],n),t}function pa(i,e){const t={},n=r(e,["method"]);n!=null&&s(t,["method"],n);const o=r(e,["category"]);o!=null&&s(t,["category"],o);const l=r(e,["threshold"]);return l!=null&&s(t,["threshold"],l),t}function ma(i,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const o=r(e,["name"]);o!=null&&s(t,["name"],o);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const a=r(e,["response"]);return a!=null&&s(t,["response"],a),t}function ha(i,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const o=r(e,["endTime"]);return o!=null&&s(t,["endTime"],o),t}function ga(i,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],ha(i,n)),t}function ya(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["dynamicThreshold"]);return o!=null&&s(t,["dynamicThreshold"],o),t}function va(i,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],ya(i,n)),t}function Ta(){return{}}function Ca(i,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function _a(i,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Ca(i,n));const o=r(e,["authType"]);o!=null&&s(t,["authType"],o);const l=r(e,["googleServiceAccountConfig"]);l!=null&&s(t,["googleServiceAccountConfig"],l);const a=r(e,["httpBasicAuthConfig"]);a!=null&&s(t,["httpBasicAuthConfig"],a);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function Ea(i,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],_a(i,n)),t}function ci(i,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>ma(i,p))),s(t,["functionDeclarations"],f)}const o=r(e,["retrieval"]);o!=null&&s(t,["retrieval"],o);const l=r(e,["googleSearch"]);l!=null&&s(t,["googleSearch"],ga(i,l));const a=r(e,["googleSearchRetrieval"]);a!=null&&s(t,["googleSearchRetrieval"],va(i,a)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],Ta());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],Ea(i,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function Sa(i,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const o=r(e,["allowedFunctionNames"]);return o!=null&&s(t,["allowedFunctionNames"],o),t}function Aa(i,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const o=r(e,["longitude"]);return o!=null&&s(t,["longitude"],o),t}function Ia(i,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],Aa(i,n));const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function xa(i,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Sa(i,n));const o=r(e,["retrievalConfig"]);return o!=null&&s(t,["retrievalConfig"],Ia(i,o)),t}function Ma(i,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Ra(i,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],Ma(i,n)),t}function Pa(i,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],Ra(i,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(e,["languageCode"]);return o!=null&&s(t,["languageCode"],o),t}function wa(i,e){const t={},n=r(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const o=r(e,["thinkingBudget"]);return o!=null&&s(t,["thinkingBudget"],o),t}function Na(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&s(t,["systemInstruction"],ye(i,O(i,o)));const l=r(e,["temperature"]);l!=null&&s(n,["temperature"],l);const a=r(e,["topP"]);a!=null&&s(n,["topP"],a);const u=r(e,["topK"]);u!=null&&s(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(e,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(e,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(e,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(e,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const v=r(e,["seed"]);v!=null&&s(n,["seed"],v);const E=r(e,["responseMimeType"]);E!=null&&s(n,["responseMimeType"],E);const I=r(e,["responseSchema"]);I!=null&&s(n,["responseSchema"],da(i,qe(i,I)));const M=r(e,["routingConfig"]);M!=null&&s(n,["routingConfig"],M);const R=r(e,["modelSelectionConfig"]);R!=null&&s(n,["modelConfig"],fa(i,R));const D=r(e,["safetySettings"]);if(t!==void 0&&D!=null){let X=D;Array.isArray(X)&&(X=X.map(He=>pa(i,He))),s(t,["safetySettings"],X)}const k=r(e,["tools"]);if(t!==void 0&&k!=null){let X=$e(i,k);Array.isArray(X)&&(X=X.map(He=>ci(i,Be(i,He)))),s(t,["tools"],X)}const L=r(e,["toolConfig"]);t!==void 0&&L!=null&&s(t,["toolConfig"],xa(i,L));const U=r(e,["labels"]);t!==void 0&&U!=null&&s(t,["labels"],U);const $=r(e,["cachedContent"]);t!==void 0&&$!=null&&s(t,["cachedContent"],ne(i,$));const N=r(e,["responseModalities"]);N!=null&&s(n,["responseModalities"],N);const F=r(e,["mediaResolution"]);F!=null&&s(n,["mediaResolution"],F);const W=r(e,["speechConfig"]);W!=null&&s(n,["speechConfig"],Pa(i,Xn(i,W)));const mt=r(e,["audioTimestamp"]);mt!=null&&s(n,["audioTimestamp"],mt);const ht=r(e,["thinkingConfig"]);return ht!=null&&s(n,["thinkingConfig"],wa(i,ht)),n}function Vn(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let a=J(i,o);Array.isArray(a)&&(a=a.map(u=>ye(i,u))),s(t,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(t,["generationConfig"],Na(i,l,t)),t}function Da(i,e,t){const n={},o=r(e,["taskType"]);t!==void 0&&o!=null&&s(t,["instances[]","task_type"],o);const l=r(e,["title"]);t!==void 0&&l!=null&&s(t,["instances[]","title"],l);const a=r(e,["outputDimensionality"]);t!==void 0&&a!=null&&s(t,["parameters","outputDimensionality"],a);const u=r(e,["mimeType"]);t!==void 0&&u!=null&&s(t,["instances[]","mimeType"],u);const d=r(e,["autoTruncate"]);return t!==void 0&&d!=null&&s(t,["parameters","autoTruncate"],d),n}function ka(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);o!=null&&s(t,["instances[]","content"],zn(i,o));const l=r(e,["config"]);return l!=null&&s(t,["config"],Da(i,l,t)),t}function Va(i,e,t){const n={},o=r(e,["outputGcsUri"]);t!==void 0&&o!=null&&s(t,["parameters","storageUri"],o);const l=r(e,["negativePrompt"]);t!==void 0&&l!=null&&s(t,["parameters","negativePrompt"],l);const a=r(e,["numberOfImages"]);t!==void 0&&a!=null&&s(t,["parameters","sampleCount"],a);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&s(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&s(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&s(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&s(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&s(t,["parameters","includeSafetyAttributes"],m);const h=r(e,["includeRaiReason"]);t!==void 0&&h!=null&&s(t,["parameters","includeRaiReason"],h);const g=r(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&s(t,["parameters","outputOptions","mimeType"],v);const E=r(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&s(t,["parameters","outputOptions","compressionQuality"],E);const I=r(e,["addWatermark"]);t!==void 0&&I!=null&&s(t,["parameters","addWatermark"],I);const M=r(e,["enhancePrompt"]);return t!==void 0&&M!=null&&s(t,["parameters","enhancePrompt"],M),n}function La(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&s(t,["instances[0]","prompt"],o);const l=r(e,["config"]);return l!=null&&s(t,["config"],Va(i,l,t)),t}function dt(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const o=r(e,["imageBytes"]);o!=null&&s(t,["bytesBase64Encoded"],ie(i,o));const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Fa(i,e){const t={},n=r(e,["maskMode"]);n!=null&&s(t,["maskMode"],n);const o=r(e,["segmentationClasses"]);o!=null&&s(t,["maskClasses"],o);const l=r(e,["maskDilation"]);return l!=null&&s(t,["dilation"],l),t}function Ua(i,e){const t={},n=r(e,["controlType"]);n!=null&&s(t,["controlType"],n);const o=r(e,["enableControlImageComputation"]);return o!=null&&s(t,["computeControl"],o),t}function Ga(i,e){const t={},n=r(e,["styleDescription"]);return n!=null&&s(t,["styleDescription"],n),t}function qa(i,e){const t={},n=r(e,["subjectType"]);n!=null&&s(t,["subjectType"],n);const o=r(e,["subjectDescription"]);return o!=null&&s(t,["subjectDescription"],o),t}function Ba(i,e){const t={},n=r(e,["referenceImage"]);n!=null&&s(t,["referenceImage"],dt(i,n));const o=r(e,["referenceId"]);o!=null&&s(t,["referenceId"],o);const l=r(e,["referenceType"]);l!=null&&s(t,["referenceType"],l);const a=r(e,["maskImageConfig"]);a!=null&&s(t,["maskImageConfig"],Fa(i,a));const u=r(e,["controlImageConfig"]);u!=null&&s(t,["controlImageConfig"],Ua(i,u));const d=r(e,["styleImageConfig"]);d!=null&&s(t,["styleImageConfig"],Ga(i,d));const c=r(e,["subjectImageConfig"]);return c!=null&&s(t,["subjectImageConfig"],qa(i,c)),t}function $a(i,e,t){const n={},o=r(e,["outputGcsUri"]);t!==void 0&&o!=null&&s(t,["parameters","storageUri"],o);const l=r(e,["negativePrompt"]);t!==void 0&&l!=null&&s(t,["parameters","negativePrompt"],l);const a=r(e,["numberOfImages"]);t!==void 0&&a!=null&&s(t,["parameters","sampleCount"],a);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&s(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&s(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&s(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&s(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&s(t,["parameters","includeSafetyAttributes"],m);const h=r(e,["includeRaiReason"]);t!==void 0&&h!=null&&s(t,["parameters","includeRaiReason"],h);const g=r(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const v=r(e,["outputMimeType"]);t!==void 0&&v!=null&&s(t,["parameters","outputOptions","mimeType"],v);const E=r(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&s(t,["parameters","outputOptions","compressionQuality"],E);const I=r(e,["editMode"]);t!==void 0&&I!=null&&s(t,["parameters","editMode"],I);const M=r(e,["baseSteps"]);return t!==void 0&&M!=null&&s(t,["parameters","editConfig","baseSteps"],M),n}function ba(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&s(t,["instances[0]","prompt"],o);const l=r(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Ba(i,d))),s(t,["instances[0]","referenceImages"],u)}const a=r(e,["config"]);return a!=null&&s(t,["config"],$a(i,a,t)),t}function Oa(i,e,t){const n={},o=r(e,["includeRaiReason"]);t!==void 0&&o!=null&&s(t,["parameters","includeRaiReason"],o);const l=r(e,["outputMimeType"]);t!==void 0&&l!=null&&s(t,["parameters","outputOptions","mimeType"],l);const a=r(e,["outputCompressionQuality"]);t!==void 0&&a!=null&&s(t,["parameters","outputOptions","compressionQuality"],a);const u=r(e,["numberOfImages"]);t!==void 0&&u!=null&&s(t,["parameters","sampleCount"],u);const d=r(e,["mode"]);return t!==void 0&&d!=null&&s(t,["parameters","mode"],d),n}function Ha(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["image"]);o!=null&&s(t,["instances[0]","image"],dt(i,o));const l=r(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=r(e,["config"]);return a!=null&&s(t,["config"],Oa(i,a,t)),t}function Ja(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Wa(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=r(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],ti(i,u)),n}function Za(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Wa(i,n,t)),t}function Ya(i,e,t){const n={},o=r(e,["displayName"]);t!==void 0&&o!=null&&s(t,["displayName"],o);const l=r(e,["description"]);t!==void 0&&l!=null&&s(t,["description"],l);const a=r(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&s(t,["defaultCheckpointId"],a),n}function Ka(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],Ya(i,o,t)),t}function za(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],G(i,n));const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Xa(i,e,t){const n={},o=r(e,["systemInstruction"]);t!==void 0&&o!=null&&s(t,["systemInstruction"],ye(i,O(i,o)));const l=r(e,["tools"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ci(i,d))),s(t,["tools"],u)}const a=r(e,["generationConfig"]);return t!==void 0&&a!=null&&s(t,["generationConfig"],a),n}function Qa(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let a=J(i,o);Array.isArray(a)&&(a=a.map(u=>ye(i,u))),s(t,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(t,["config"],Xa(i,l,t)),t}function ja(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["contents"]);if(o!=null){let a=J(i,o);Array.isArray(a)&&(a=a.map(u=>ye(i,u))),s(t,["contents"],a)}const l=r(e,["config"]);return l!=null&&s(t,["config"],l),t}function eu(i,e,t){const n={},o=r(e,["numberOfVideos"]);t!==void 0&&o!=null&&s(t,["parameters","sampleCount"],o);const l=r(e,["outputGcsUri"]);t!==void 0&&l!=null&&s(t,["parameters","storageUri"],l);const a=r(e,["fps"]);t!==void 0&&a!=null&&s(t,["parameters","fps"],a);const u=r(e,["durationSeconds"]);t!==void 0&&u!=null&&s(t,["parameters","durationSeconds"],u);const d=r(e,["seed"]);t!==void 0&&d!=null&&s(t,["parameters","seed"],d);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&s(t,["parameters","aspectRatio"],c);const f=r(e,["resolution"]);t!==void 0&&f!=null&&s(t,["parameters","resolution"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["pubsubTopic"]);t!==void 0&&m!=null&&s(t,["parameters","pubsubTopic"],m);const h=r(e,["negativePrompt"]);t!==void 0&&h!=null&&s(t,["parameters","negativePrompt"],h);const g=r(e,["enhancePrompt"]);t!==void 0&&g!=null&&s(t,["parameters","enhancePrompt"],g);const v=r(e,["generateAudio"]);return t!==void 0&&v!=null&&s(t,["parameters","generateAudio"],v),n}function tu(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],G(i,n));const o=r(e,["prompt"]);o!=null&&s(t,["instances[0]","prompt"],o);const l=r(e,["image"]);l!=null&&s(t,["instances[0]","image"],dt(i,l));const a=r(e,["config"]);return a!=null&&s(t,["config"],eu(i,a,t)),t}function nu(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function iu(i,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function ou(i,e){const t={},n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function ru(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],nu(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],iu(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],ou(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function su(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ru(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function lu(i,e){const t={},n=r(e,["citationSources"]);return n!=null&&s(t,["citations"],n),t}function au(i,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const o=r(e,["urlRetrievalStatus"]);return o!=null&&s(t,["urlRetrievalStatus"],o),t}function uu(i,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>au(i,l))),s(t,["urlMetadata"],o)}return t}function cu(i,e){const t={},n=r(e,["content"]);n!=null&&s(t,["content"],su(i,n));const o=r(e,["citationMetadata"]);o!=null&&s(t,["citationMetadata"],lu(i,o));const l=r(e,["tokenCount"]);l!=null&&s(t,["tokenCount"],l);const a=r(e,["finishReason"]);a!=null&&s(t,["finishReason"],a);const u=r(e,["urlContextMetadata"]);u!=null&&s(t,["urlContextMetadata"],uu(i,u));const d=r(e,["avgLogprobs"]);d!=null&&s(t,["avgLogprobs"],d);const c=r(e,["groundingMetadata"]);c!=null&&s(t,["groundingMetadata"],c);const f=r(e,["index"]);f!=null&&s(t,["index"],f);const p=r(e,["logprobsResult"]);p!=null&&s(t,["logprobsResult"],p);const m=r(e,["safetyRatings"]);return m!=null&&s(t,["safetyRatings"],m),t}function Ln(i,e){const t={},n=r(e,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>cu(i,d))),s(t,["candidates"],u)}const o=r(e,["modelVersion"]);o!=null&&s(t,["modelVersion"],o);const l=r(e,["promptFeedback"]);l!=null&&s(t,["promptFeedback"],l);const a=r(e,["usageMetadata"]);return a!=null&&s(t,["usageMetadata"],a),t}function du(i,e){const t={},n=r(e,["values"]);return n!=null&&s(t,["values"],n),t}function fu(){return{}}function pu(i,e){const t={},n=r(e,["embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>du(i,a))),s(t,["embeddings"],l)}return r(e,["metadata"])!=null&&s(t,["metadata"],fu()),t}function mu(i,e){const t={},n=r(e,["bytesBase64Encoded"]);n!=null&&s(t,["imageBytes"],ie(i,n));const o=r(e,["mimeType"]);return o!=null&&s(t,["mimeType"],o),t}function di(i,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const o=r(e,["safetyAttributes","scores"]);o!=null&&s(t,["scores"],o);const l=r(e,["contentType"]);return l!=null&&s(t,["contentType"],l),t}function hu(i,e){const t={},n=r(e,["_self"]);n!=null&&s(t,["image"],mu(i,n));const o=r(e,["raiFilteredReason"]);o!=null&&s(t,["raiFilteredReason"],o);const l=r(e,["_self"]);return l!=null&&s(t,["safetyAttributes"],di(i,l)),t}function gu(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>hu(i,a))),s(t,["generatedImages"],l)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&s(t,["positivePromptSafetyAttributes"],di(i,o)),t}function yu(i,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const o=r(e,["createTime"]);o!=null&&s(t,["createTime"],o);const l=r(e,["updateTime"]);return l!=null&&s(t,["updateTime"],l),t}function rt(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["description"]);l!=null&&s(t,["description"],l);const a=r(e,["version"]);a!=null&&s(t,["version"],a);const u=r(e,["_self"]);u!=null&&s(t,["tunedModelInfo"],yu(i,u));const d=r(e,["inputTokenLimit"]);d!=null&&s(t,["inputTokenLimit"],d);const c=r(e,["outputTokenLimit"]);c!=null&&s(t,["outputTokenLimit"],c);const f=r(e,["supportedGenerationMethods"]);return f!=null&&s(t,["supportedActions"],f),t}function vu(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["_self"]);if(o!=null){let l=ni(i,o);Array.isArray(l)&&(l=l.map(a=>rt(i,a))),s(t,["models"],l)}return t}function Tu(){return{}}function Cu(i,e){const t={},n=r(e,["totalTokens"]);n!=null&&s(t,["totalTokens"],n);const o=r(e,["cachedContentTokenCount"]);return o!=null&&s(t,["cachedContentTokenCount"],o),t}function _u(i,e){const t={},n=r(e,["video","uri"]);n!=null&&s(t,["uri"],n);const o=r(e,["video","encodedVideo"]);o!=null&&s(t,["videoBytes"],ie(i,o));const l=r(e,["encoding"]);return l!=null&&s(t,["mimeType"],l),t}function Eu(i,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],_u(i,n)),t}function Su(i,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Eu(i,u))),s(t,["generatedVideos"],a)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&s(t,["raiMediaFilteredCount"],o);const l=r(e,["raiMediaFilteredReasons"]);return l!=null&&s(t,["raiMediaFilteredReasons"],l),t}function Au(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["metadata"]);o!=null&&s(t,["metadata"],o);const l=r(e,["done"]);l!=null&&s(t,["done"],l);const a=r(e,["error"]);a!=null&&s(t,["error"],a);const u=r(e,["response","generateVideoResponse"]);return u!=null&&s(t,["response"],Su(i,u)),t}function Iu(i,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const o=r(e,["endOffset"]);o!=null&&s(t,["endOffset"],o);const l=r(e,["startOffset"]);return l!=null&&s(t,["startOffset"],l),t}function xu(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["data"]);o!=null&&s(t,["data"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Mu(i,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const o=r(e,["fileUri"]);o!=null&&s(t,["fileUri"],o);const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Ru(i,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Iu(i,n));const o=r(e,["thought"]);o!=null&&s(t,["thought"],o);const l=r(e,["inlineData"]);l!=null&&s(t,["inlineData"],xu(i,l));const a=r(e,["fileData"]);a!=null&&s(t,["fileData"],Mu(i,a));const u=r(e,["codeExecutionResult"]);u!=null&&s(t,["codeExecutionResult"],u);const d=r(e,["executableCode"]);d!=null&&s(t,["executableCode"],d);const c=r(e,["functionCall"]);c!=null&&s(t,["functionCall"],c);const f=r(e,["functionResponse"]);f!=null&&s(t,["functionResponse"],f);const p=r(e,["text"]);return p!=null&&s(t,["text"],p),t}function Pu(i,e){const t={},n=r(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ru(i,a))),s(t,["parts"],l)}const o=r(e,["role"]);return o!=null&&s(t,["role"],o),t}function wu(i,e){const t={},n=r(e,["citations"]);return n!=null&&s(t,["citations"],n),t}function Nu(i,e){const t={},n=r(e,["content"]);n!=null&&s(t,["content"],Pu(i,n));const o=r(e,["citationMetadata"]);o!=null&&s(t,["citationMetadata"],wu(i,o));const l=r(e,["finishMessage"]);l!=null&&s(t,["finishMessage"],l);const a=r(e,["finishReason"]);a!=null&&s(t,["finishReason"],a);const u=r(e,["avgLogprobs"]);u!=null&&s(t,["avgLogprobs"],u);const d=r(e,["groundingMetadata"]);d!=null&&s(t,["groundingMetadata"],d);const c=r(e,["index"]);c!=null&&s(t,["index"],c);const f=r(e,["logprobsResult"]);f!=null&&s(t,["logprobsResult"],f);const p=r(e,["safetyRatings"]);return p!=null&&s(t,["safetyRatings"],p),t}function Fn(i,e){const t={},n=r(e,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Nu(i,f))),s(t,["candidates"],c)}const o=r(e,["createTime"]);o!=null&&s(t,["createTime"],o);const l=r(e,["responseId"]);l!=null&&s(t,["responseId"],l);const a=r(e,["modelVersion"]);a!=null&&s(t,["modelVersion"],a);const u=r(e,["promptFeedback"]);u!=null&&s(t,["promptFeedback"],u);const d=r(e,["usageMetadata"]);return d!=null&&s(t,["usageMetadata"],d),t}function Du(i,e){const t={},n=r(e,["truncated"]);n!=null&&s(t,["truncated"],n);const o=r(e,["token_count"]);return o!=null&&s(t,["tokenCount"],o),t}function ku(i,e){const t={},n=r(e,["values"]);n!=null&&s(t,["values"],n);const o=r(e,["statistics"]);return o!=null&&s(t,["statistics"],Du(i,o)),t}function Vu(i,e){const t={},n=r(e,["billableCharacterCount"]);return n!=null&&s(t,["billableCharacterCount"],n),t}function Lu(i,e){const t={},n=r(e,["predictions[]","embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ku(i,a))),s(t,["embeddings"],l)}const o=r(e,["metadata"]);return o!=null&&s(t,["metadata"],Vu(i,o)),t}function Fu(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&s(t,["imageBytes"],ie(i,o));const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function fi(i,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const o=r(e,["safetyAttributes","scores"]);o!=null&&s(t,["scores"],o);const l=r(e,["contentType"]);return l!=null&&s(t,["contentType"],l),t}function ft(i,e){const t={},n=r(e,["_self"]);n!=null&&s(t,["image"],Fu(i,n));const o=r(e,["raiFilteredReason"]);o!=null&&s(t,["raiFilteredReason"],o);const l=r(e,["_self"]);l!=null&&s(t,["safetyAttributes"],fi(i,l));const a=r(e,["prompt"]);return a!=null&&s(t,["enhancedPrompt"],a),t}function Uu(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ft(i,a))),s(t,["generatedImages"],l)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&s(t,["positivePromptSafetyAttributes"],fi(i,o)),t}function Gu(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ft(i,l))),s(t,["generatedImages"],o)}return t}function qu(i,e){const t={},n=r(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ft(i,l))),s(t,["generatedImages"],o)}return t}function Bu(i,e){const t={},n=r(e,["endpoint"]);n!=null&&s(t,["name"],n);const o=r(e,["deployedModelId"]);return o!=null&&s(t,["deployedModelId"],o),t}function $u(i,e){const t={},n=r(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(t,["baseModel"],n);const o=r(e,["createTime"]);o!=null&&s(t,["createTime"],o);const l=r(e,["updateTime"]);return l!=null&&s(t,["updateTime"],l),t}function bu(i,e){const t={},n=r(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const o=r(e,["epoch"]);o!=null&&s(t,["epoch"],o);const l=r(e,["step"]);return l!=null&&s(t,["step"],l),t}function st(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["displayName"]);o!=null&&s(t,["displayName"],o);const l=r(e,["description"]);l!=null&&s(t,["description"],l);const a=r(e,["versionId"]);a!=null&&s(t,["version"],a);const u=r(e,["deployedModels"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>Bu(i,h))),s(t,["endpoints"],m)}const d=r(e,["labels"]);d!=null&&s(t,["labels"],d);const c=r(e,["_self"]);c!=null&&s(t,["tunedModelInfo"],$u(i,c));const f=r(e,["defaultCheckpointId"]);f!=null&&s(t,["defaultCheckpointId"],f);const p=r(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>bu(i,h))),s(t,["checkpoints"],m)}return t}function Ou(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["_self"]);if(o!=null){let l=ni(i,o);Array.isArray(l)&&(l=l.map(a=>st(i,a))),s(t,["models"],l)}return t}function Hu(){return{}}function Ju(i,e){const t={},n=r(e,["totalTokens"]);return n!=null&&s(t,["totalTokens"],n),t}function Wu(i,e){const t={},n=r(e,["tokensInfo"]);return n!=null&&s(t,["tokensInfo"],n),t}function Zu(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&s(t,["videoBytes"],ie(i,o));const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Yu(i,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],Zu(i,n)),t}function Ku(i,e){const t={},n=r(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Yu(i,u))),s(t,["generatedVideos"],a)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&s(t,["raiMediaFilteredCount"],o);const l=r(e,["raiMediaFilteredReasons"]);return l!=null&&s(t,["raiMediaFilteredReasons"],l),t}function zu(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["metadata"]);o!=null&&s(t,["metadata"],o);const l=r(e,["done"]);l!=null&&s(t,["done"],l);const a=r(e,["error"]);a!=null&&s(t,["error"],a);const u=r(e,["response"]);return u!=null&&s(t,["response"],Ku(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xu="Content-Type",Qu="X-Server-Timeout",ju="User-Agent",lt="x-goog-api-client",ec="1.2.0",tc=`google-genai-sdk/${ec}`,nc="v1beta1",ic="v1beta",Un=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class pi extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class at extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class oc{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:nc,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ic,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const o=[this.getRequestUrlInternal(t)];return n&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))o.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?n[o]=Object.assign(Object.assign({},n[o]),l):l!==void 0&&(n[o]=l);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const o=new AbortController,l=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),n&&n.addEventListener("abort",()=>{o.abort()}),e.signal=l}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Gn(o),new tt(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Gn(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ee(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield q(o.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,g=m.code,v=`got status: ${h}. ${JSON.stringify(p)}`;if(g>=400&&g<500)throw new pi(v);if(g>=500&&g<600)throw new at(v)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}a+=c;let f=a.match(Un);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield q(new tt(m)),a=a.slice(f[0].length),f=a.match(Un)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=tc+" "+this.clientOptions.userAgentExtra;return e[ju]=t,e[lt]=t,e[Xu]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append(Qu,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);o.sizeBytes=String(a.size);const u=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d=await this.fetchUploadUrl(o,t);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:S("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=a==null?void 0:a.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Gn(i){var e;if(i===void 0)throw new at("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const l=`got status: ${t} ${n}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new pi(l):t>=500&&t<600?new at(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rc="mcp_used/unknown";function mi(i){for(const e of i)if(pt(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function hi(i){var e;const t=(e=i[lt])!==null&&e!==void 0?e:"";i[lt]=(t+` ${rc}`).trimStart()}function sc(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>pt(o)))!==null&&n!==void 0?n:!1}function lc(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!pt(o)))!==null&&n!==void 0?n:!1}function pt(i){return i!==null&&typeof i=="object"&&"tool"in i&&"callTool"in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ac(i,e,t){const n=new so;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const l=El(i,o);Object.assign(n,l),e(n)}class uc{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=fc(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(R=>{c=R}),p=e.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:R=>{ac(h,p.onmessage,R)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(R){},onclose:(n=p==null?void 0:p.onclose)!==null&&n!==void 0?n:function(R){}},v=this.webSocketFactory.create(d,dc(a),g);v.connect(),await f;const E=G(this.apiClient,e.model),I=li(this.apiClient,{model:E}),M=ot(this.apiClient,{setup:I});return v.send(JSON.stringify(M)),new cc(v,this.apiClient)}}class cc{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Fs(this.apiClient,e),n=ai(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Us(this.apiClient,e),n=ot(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=ot(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ce.PLAY)}pause(){this.sendPlaybackControl(ce.PAUSE)}stop(){this.sendPlaybackControl(ce.STOP)}resetContext(){this.sendPlaybackControl(ce.RESET_CONTEXT)}close(){this.conn.close()}}function dc(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function fc(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pc="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mc(i,e,t){const n=new ro;let o;if(t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),i.isVertexAI()){const l=pl(i,o);Object.assign(n,l)}else{const l=fl(i,o);Object.assign(n,l)}e(n)}class hc{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new uc(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,o,l,a,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&mi(e.config.tools)&&hi(p);const m=Tc(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const N=this.apiClient.getApiKey();f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateContent?key=${N}`}let h=()=>{};const g=new Promise(N=>{h=N}),v=e.callbacks,E=function(){var N;(N=v==null?void 0:v.onopen)===null||N===void 0||N.call(v),h({})},I=this.apiClient,M={onopen:E,onmessage:N=>{mc(I,v.onmessage,N)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(N){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(N){}},R=this.webSocketFactory.create(f,vc(m),M);R.connect(),await g;let D=G(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const N=this.apiClient.getProject(),F=this.apiClient.getLocation();D=`projects/${N}/locations/${F}/`+D}let k={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ue.AUDIO]}:e.config.responseModalities=[Ue.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],U=[];for(const N of L)if(this.isCallableTool(N)){const F=N;U.push(await F.tool())}else U.push(N);U.length>0&&(e.config.tools=U);const $={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=Ps(this.apiClient,$):k=Rs(this.apiClient,$),delete k.config,R.send(JSON.stringify(k)),new yc(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const gc={turnComplete:!0};class yc{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=J(e,t.turns),e.isVertexAI()?n=n.map(o=>ye(e,o)):n=n.map(o=>Oe(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const l of n){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(pc)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},gc),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Ls(this.apiClient,e)}:t={realtimeInput:Vs(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function vc(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function Tc(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qn=10;function Bn(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const a of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(we(a)){o=!0;break}if(!o)return!0;const l=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function we(i){return"callTool"in i&&typeof i.callTool=="function"}function $n(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cc extends Ae{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,o,l,a,u;const d=await this.processParamsForMcpUsage(t);if(!sc(t)||Bn(t.config))return await this.generateContentInternal(d);if(lc(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=J(this.apiClient,d.contents),m=(l=(o=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:qn;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,v=[];for(const E of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(we(E)){const M=await E.callTool(c.functionCalls);v.push(...M)}h++,f={role:"user",parts:v},d.contents=J(this.apiClient,d.contents),d.contents.push(g),d.contents.push(f),$n(d.config)&&(p.push(g),p.push(f))}return $n(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(Bn(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var o;let l;const a=[];if(n!=null&&n.generatedImages)for(const d of n.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u}),this.list=async t=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new be(ge.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,n,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>we(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&mi(e.config.tools)){const d=(o=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),hi(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,n,o;const l=new Map;for(const a of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(we(a)){const u=a,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var t,n,o;const l=(o=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:qn;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){var m,h;return Ee(this,arguments,function*(){for(var g,v,E,I;u<l;){a&&(u++,a=!1);const k=yield q(c.processParamsForMcpUsage(p)),L=yield q(c.generateContentStreamInternal(k)),U=[],$=[];try{for(var M=!0,R=(v=void 0,Pe(L)),D;D=yield q(R.next()),g=D.done,!g;M=!0){I=D.value,M=!1;const N=I;if(yield yield q(N),N.candidates&&(!((m=N.candidates[0])===null||m===void 0)&&m.content)){$.push(N.candidates[0].content);for(const F of(h=N.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const W=yield q(f.get(F.functionCall.name).callTool([F.functionCall]));U.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(N){v={error:N}}finally{try{!M&&!g&&(E=R.return)&&(yield q(E.call(R)))}finally{if(v)throw v.error}}if(U.length>0){a=!0;const N=new ve;N.candidates=[{content:{role:"user",parts:U}}],yield yield q(N);const F=[];F.push(...$),F.push({role:"user",parts:U});const W=J(c.apiClient,p.contents).concat(F);p.contents=W}else break}})}(this,d,e)}async generateContentInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Vn(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Fn(this.apiClient,f),m=new ve;return Object.assign(m,p),m})}else{const c=kn(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ln(this.apiClient,f),m=new ve;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Vn(this.apiClient,e);u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return a=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(p){return Ee(this,arguments,function*(){var m,h,g,v;try{for(var E=!0,I=Pe(p),M;M=yield q(I.next()),m=M.done,!m;E=!0){v=M.value,E=!1;const D=Fn(f,yield q(v.json())),k=new ve;Object.assign(k,D),yield yield q(k)}}catch(R){h={error:R}}finally{try{!E&&!m&&(g=I.return)&&(yield q(g.call(I)))}finally{if(h)throw h.error}}})})}else{const c=kn(this.apiClient,e);u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return a=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return Ee(this,arguments,function*(){var m,h,g,v;try{for(var E=!0,I=Pe(p),M;M=yield q(I.next()),m=M.done,!m;E=!0){v=M.value,E=!1;const D=Ln(f,yield q(v.json())),k=new ve;Object.assign(k,D),yield yield q(k)}}catch(R){h={error:R}}finally{try{!E&&!m&&(g=I.return)&&(yield q(g.call(I)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ka(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Lu(this.apiClient,f),m=new pn;return Object.assign(m,p),m})}else{const c=Zl(this.apiClient,e);return u=S("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=pu(this.apiClient,f),m=new pn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=La(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Uu(this.apiClient,f),m=new mn;return Object.assign(m,p),m})}else{const c=Kl(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=gu(this.apiClient,f),m=new mn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=ba(this.apiClient,e);return l=S("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Gu(this.apiClient,d),f=new ji;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=Ha(this.apiClient,e);return l=S("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=qu(this.apiClient,d),f=new eo;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ja(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>st(this.apiClient,f))}else{const c=zl(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>rt(this.apiClient,f))}}async listInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Za(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ou(this.apiClient,f),m=new hn;return Object.assign(m,p),m})}else{const c=Ql(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=vu(this.apiClient,f),m=new hn;return Object.assign(m,p),m})}}async update(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ka(this.apiClient,e);return u=S("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>st(this.apiClient,f))}else{const c=ea(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>rt(this.apiClient,f))}}async delete(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=za(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Hu(),p=new gn;return Object.assign(p,f),p})}else{const c=ta(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Tu(),p=new gn;return Object.assign(p,f),p})}}async countTokens(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Qa(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ju(this.apiClient,f),m=new yn;return Object.assign(m,p),m})}else{const c=ia(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Cu(this.apiClient,f),m=new yn;return Object.assign(m,p),m})}}async computeTokens(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=ja(this.apiClient,e);return l=S("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Wu(this.apiClient,d),f=new to;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=tu(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>zu(this.apiClient,f))}else{const c=sa(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Au(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _c(i,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Ec(i,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Sc(i,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["operationName"],n);const o=r(e,["resourceName"]);o!=null&&s(t,["_url","resourceName"],o);const l=r(e,["config"]);return l!=null&&s(t,["config"],l),t}function Ac(i,e){const t={},n=r(e,["video","uri"]);n!=null&&s(t,["uri"],n);const o=r(e,["video","encodedVideo"]);o!=null&&s(t,["videoBytes"],ie(i,o));const l=r(e,["encoding"]);return l!=null&&s(t,["mimeType"],l),t}function Ic(i,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],Ac(i,n)),t}function xc(i,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Ic(i,u))),s(t,["generatedVideos"],a)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&s(t,["raiMediaFilteredCount"],o);const l=r(e,["raiMediaFilteredReasons"]);return l!=null&&s(t,["raiMediaFilteredReasons"],l),t}function Mc(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["metadata"]);o!=null&&s(t,["metadata"],o);const l=r(e,["done"]);l!=null&&s(t,["done"],l);const a=r(e,["error"]);a!=null&&s(t,["error"],a);const u=r(e,["response","generateVideoResponse"]);return u!=null&&s(t,["response"],xc(i,u)),t}function Rc(i,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const o=r(e,["bytesBase64Encoded"]);o!=null&&s(t,["videoBytes"],ie(i,o));const l=r(e,["mimeType"]);return l!=null&&s(t,["mimeType"],l),t}function Pc(i,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],Rc(i,n)),t}function wc(i,e){const t={},n=r(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Pc(i,u))),s(t,["generatedVideos"],a)}const o=r(e,["raiMediaFilteredCount"]);o!=null&&s(t,["raiMediaFilteredCount"],o);const l=r(e,["raiMediaFilteredReasons"]);return l!=null&&s(t,["raiMediaFilteredReasons"],l),t}function bn(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["metadata"]);o!=null&&s(t,["metadata"],o);const l=r(e,["done"]);l!=null&&s(t,["done"],l);const a=r(e,["error"]);a!=null&&s(t,["error"],a);const u=r(e,["response"]);return u!=null&&s(t,["response"],wc(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nc extends Ae{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;return n&&"httpOptions"in n&&(l=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ec(this.apiClient,e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>bn(this.apiClient,f))}else{const c=_c(this.apiClient,e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mc(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=Sc(this.apiClient,e);return l=S("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>bn(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dc(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function kc(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=r(e,["filter"]);return t!==void 0&&a!=null&&s(t,["_query","filter"],a),n}function Vc(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],kc(i,n,t)),t}function Lc(i,e){const t={},n=r(e,["textInput"]);n!=null&&s(t,["textInput"],n);const o=r(e,["output"]);return o!=null&&s(t,["output"],o),t}function Fc(i,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Lc(i,l))),s(t,["examples","examples"],o)}return t}function Uc(i,e,t){const n={};if(r(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&s(t,["displayName"],o),r(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=r(e,["epochCount"]);t!==void 0&&l!=null&&s(t,["tuningTask","hyperparameters","epochCount"],l);const a=r(e,["learningRateMultiplier"]);if(a!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),r(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(e,["batchSize"]);t!==void 0&&u!=null&&s(t,["tuningTask","hyperparameters","batchSize"],u);const d=r(e,["learningRate"]);return t!==void 0&&d!=null&&s(t,["tuningTask","hyperparameters","learningRate"],d),n}function Gc(i,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const o=r(e,["trainingDataset"]);o!=null&&s(t,["tuningTask","trainingData"],Fc(i,o));const l=r(e,["config"]);return l!=null&&s(t,["config"],Uc(i,l,t)),t}function qc(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],n);const o=r(e,["config"]);return o!=null&&s(t,["config"],o),t}function Bc(i,e,t){const n={},o=r(e,["pageSize"]);t!==void 0&&o!=null&&s(t,["_query","pageSize"],o);const l=r(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=r(e,["filter"]);return t!==void 0&&a!=null&&s(t,["_query","filter"],a),n}function $c(i,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Bc(i,n,t)),t}function bc(i,e,t){const n={},o=r(e,["gcsUri"]);if(t!==void 0&&o!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],o),r(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Oc(i,e){const t={},n=r(e,["gcsUri"]);return n!=null&&s(t,["validationDatasetUri"],n),t}function Hc(i,e,t){const n={},o=r(e,["validationDataset"]);t!==void 0&&o!=null&&s(t,["supervisedTuningSpec"],Oc(i,o));const l=r(e,["tunedModelDisplayName"]);t!==void 0&&l!=null&&s(t,["tunedModelDisplayName"],l);const a=r(e,["description"]);t!==void 0&&a!=null&&s(t,["description"],a);const u=r(e,["epochCount"]);t!==void 0&&u!=null&&s(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=r(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&s(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const c=r(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&s(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=r(e,["adapterSize"]);if(t!==void 0&&f!=null&&s(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),r(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Jc(i,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const o=r(e,["trainingDataset"]);o!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],bc(i,o,t));const l=r(e,["config"]);return l!=null&&s(t,["config"],Hc(i,l,t)),t}function Wc(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["model"],n);const o=r(e,["name"]);return o!=null&&s(t,["endpoint"],o),t}function gi(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["state"]);o!=null&&s(t,["state"],jn(i,o));const l=r(e,["createTime"]);l!=null&&s(t,["createTime"],l);const a=r(e,["tuningTask","startTime"]);a!=null&&s(t,["startTime"],a);const u=r(e,["tuningTask","completeTime"]);u!=null&&s(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&s(t,["updateTime"],d);const c=r(e,["description"]);c!=null&&s(t,["description"],c);const f=r(e,["baseModel"]);f!=null&&s(t,["baseModel"],f);const p=r(e,["_self"]);p!=null&&s(t,["tunedModel"],Wc(i,p));const m=r(e,["distillationSpec"]);m!=null&&s(t,["distillationSpec"],m);const h=r(e,["experiment"]);h!=null&&s(t,["experiment"],h);const g=r(e,["labels"]);g!=null&&s(t,["labels"],g);const v=r(e,["pipelineJob"]);v!=null&&s(t,["pipelineJob"],v);const E=r(e,["serviceAccount"]);E!=null&&s(t,["serviceAccount"],E);const I=r(e,["tunedModelDisplayName"]);return I!=null&&s(t,["tunedModelDisplayName"],I),t}function Zc(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>gi(i,a))),s(t,["tuningJobs"],l)}return t}function Yc(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["metadata"]);o!=null&&s(t,["metadata"],o);const l=r(e,["done"]);l!=null&&s(t,["done"],l);const a=r(e,["error"]);return a!=null&&s(t,["error"],a),t}function Kc(i,e){const t={},n=r(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const o=r(e,["epoch"]);o!=null&&s(t,["epoch"],o);const l=r(e,["step"]);l!=null&&s(t,["step"],l);const a=r(e,["endpoint"]);return a!=null&&s(t,["endpoint"],a),t}function zc(i,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],n);const o=r(e,["endpoint"]);o!=null&&s(t,["endpoint"],o);const l=r(e,["checkpoints"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Kc(i,u))),s(t,["checkpoints"],a)}return t}function ut(i,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const o=r(e,["state"]);o!=null&&s(t,["state"],jn(i,o));const l=r(e,["createTime"]);l!=null&&s(t,["createTime"],l);const a=r(e,["startTime"]);a!=null&&s(t,["startTime"],a);const u=r(e,["endTime"]);u!=null&&s(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&s(t,["updateTime"],d);const c=r(e,["error"]);c!=null&&s(t,["error"],c);const f=r(e,["description"]);f!=null&&s(t,["description"],f);const p=r(e,["baseModel"]);p!=null&&s(t,["baseModel"],p);const m=r(e,["tunedModel"]);m!=null&&s(t,["tunedModel"],zc(i,m));const h=r(e,["supervisedTuningSpec"]);h!=null&&s(t,["supervisedTuningSpec"],h);const g=r(e,["tuningDataStats"]);g!=null&&s(t,["tuningDataStats"],g);const v=r(e,["encryptionSpec"]);v!=null&&s(t,["encryptionSpec"],v);const E=r(e,["partnerModelTuningSpec"]);E!=null&&s(t,["partnerModelTuningSpec"],E);const I=r(e,["distillationSpec"]);I!=null&&s(t,["distillationSpec"],I);const M=r(e,["experiment"]);M!=null&&s(t,["experiment"],M);const R=r(e,["labels"]);R!=null&&s(t,["labels"],R);const D=r(e,["pipelineJob"]);D!=null&&s(t,["pipelineJob"],D);const k=r(e,["serviceAccount"]);k!=null&&s(t,["serviceAccount"],k);const L=r(e,["tunedModelDisplayName"]);return L!=null&&s(t,["tunedModelDisplayName"],L),t}function Xc(i,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const o=r(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ut(i,a))),s(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qc extends Ae{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new be(ge.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let o="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?o=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(o=n.name.split("/operations/")[0]),{name:o,state:et.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=qc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>ut(this.apiClient,f))}else{const c=Dc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>gi(this.apiClient,f))}}async listInternal(e){var t,n,o,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=$c(this.apiClient,e);return u=S("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Xc(this.apiClient,f),m=new vn;return Object.assign(m,p),m})}else{const c=Vc(this.apiClient,e);return u=S("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Zc(this.apiClient,f),m=new vn;return Object.assign(m,p),m})}}async tuneInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI()){const u=Jc(this.apiClient,e);return l=S("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>ut(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let o,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gc(this.apiClient,e);return l=S("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>Yc(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jc{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ed=1024*1024*8,td=3,nd=1e3,id=2,We="x-goog-upload-status";async function od(i,e,t){var n,o,l;let a=0,u=0,d=new tt(new Response),c="upload";for(a=i.size;u<a;){const p=Math.min(ed,a-u),m=i.slice(u,u+p);u+p>=a&&(c+=", finalize");let h=0,g=nd;for(;h<td&&(d=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[We]));)h++,await sd(g),g=g*id;if(u+=p,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[We])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[We])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function rd(i){return{size:i.size,type:i.type}}function sd(i){return new Promise(e=>setTimeout(e,i))}class ld{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await od(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rd(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ad{create(e,t,n){return new ud(e,t,n)}}class ud{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const On="x-goog-api-key";class cd{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(On)===null&&e.append(On,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dd="gl-node/";class fd{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=Qi(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const o=new cd(this.apiKey);this.apiClient=new oc({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:dd+"web",uploader:new ld,downloader:new jc}),this.models=new Cc(this.apiClient),this.live=new hc(this.apiClient,o,new ad),this.chats=new Cr(this.models,this.apiClient),this.caches=new yr(this.apiClient),this.files=new kr(this.apiClient),this.operations=new Nc(this.apiClient),this.tunings=new Qc(this.apiClient)}}export{fd as G};
